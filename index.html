<!DOCTYPE html>
<html class="dark" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>FitHub App</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&family=Roboto+Mono:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#CBE635",
              "primary-hover": "#B9D428",
              "background-dark": "#121212",
              "surface-dark": "#2C2C2E",
              "surface-highlight": "#393928",
              "surface-card": "#242426",
              forest: "#2F6F52",
              "forest-hover": "#265A42",
              "background-light": "#F9F8F4",
              "surface-light": "#FFFFFF",
              "bmi-under": "#38bdf8",
              "bmi-normal": "#4ade80",
              "bmi-over": "#fbbf24",
              "bmi-obese": "#f87171",
              "water-blue": "#38bdf8",
            },
            fontFamily: {
              display: ["Lexend", "sans-serif"],
              mono: ["Roboto Mono", "monospace"],
            },
            boxShadow: {
              soft: "0 4px 20px -2px rgba(47, 111, 82, 0.15)",
            },
            animation: {
              "fade-in": "fadeIn 0.5s ease-out forwards",
              "fade-in-up":
                "fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards",
              "spin-fast": "spin 0.8s linear infinite",
              "pulse-slow": "pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite",
            },
            keyframes: {
              fadeIn: {
                "0%": { opacity: "0", transform: "translateY(10px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              fadeInUp: {
                "0%": { opacity: "0", transform: "translateY(20px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
            },
          },
        },
      };
    </script>
    <style>
      body {
        margin: 0;
        font-family: "Lexend", sans-serif;
        -webkit-tap-highlight-color: transparent;
        background-color: #121212;
      }
      html:not(.dark) body {
        background-color: #f9f8f4;
      }
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
      }
      .material-symbols-outlined.filled {
        font-variation-settings: "FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24;
      }
      .view-section {
        display: none;
        width: 100%;
        min-height: 100vh;
      }
      .view-section.active {
        display: flex;
      }
      .bmi-gradient {
        background: linear-gradient(
          90deg,
          #38bdf8 0%,
          #4ade80 33%,
          #fbbf24 66%,
          #f87171 100%
        );
      }
      .water-tank {
        position: relative;
        overflow: hidden;
        z-index: 1;
        -webkit-mask-image: -webkit-radial-gradient(white, black);
      }
      .water-wave-box {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-color: transparent;
        transform: translateY(110%);
        transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .wave {
        position: absolute;
        top: 0%;
        left: -50%;
        width: 200%;
        height: 200%;
        background-color: rgba(56, 189, 248, 0.4);
        border-radius: 40%;
        animation: rotate 6s infinite linear;
        transform-origin: 50% 48%;
      }
      .wave:nth-child(2) {
        opacity: 0.6;
        background-color: rgba(56, 189, 248, 0.6);
        border-radius: 45%;
        animation: rotate 10s infinite linear reverse;
      }
      .wave:nth-child(3) {
        opacity: 0.3;
        background-color: rgba(203, 230, 53, 0.3);
        border-radius: 42%;
        animation: rotate 12s infinite linear;
      }
      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      .water-tank.full .wave {
        background-color: rgba(74, 222, 128, 0.6);
      }

      /* Glass Back Button Style */
      .glass-back-btn {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 50;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 48px;
        height: 48px;
        border-radius: 9999px;
        background-color: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        color: #18181b;
        transition: all 0.2s ease;
      }
      .dark .glass-back-btn {
        background-color: rgba(24, 24, 27, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #ffffff;
      }
      .glass-back-btn:hover {
        transform: scale(1.05);
        background-color: rgba(255, 255, 255, 0.9);
      }
      .dark .glass-back-btn:hover {
        background-color: rgba(39, 39, 42, 0.8);
      }
    </style>
  </head>

  <body
    class="text-zinc-800 dark:text-white antialiased selection:bg-forest dark:selection:bg-primary selection:text-white dark:selection:text-black"
  >
    <!-- VIEW 1: WELCOME SCREEN -->
    <section
      id="view-welcome"
      class="view-section active relative flex-col items-center justify-center overflow-hidden"
    >
      <div
        class="absolute inset-0 z-0 bg-cover bg-center bg-no-repeat"
        style="
          background-image: linear-gradient(
              to bottom,
              rgba(18, 18, 18, 0.6) 0%,
              rgba(18, 18, 18, 1) 100%
            ),
            url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=1470&auto=format&fit=crop');
        "
      ></div>
      <div
        class="relative z-10 flex flex-col items-center gap-6 p-6 text-center w-full max-w-md animate-fade-in"
      >
        <div class="flex flex-col gap-2">
          <h1
            class="text-6xl sm:text-7xl font-black leading-tight tracking-tight"
          >
            <span class="text-white">Fit</span
            ><span class="text-primary">Hub</span>
          </h1>
          <h2
            class="text-gray-200 text-lg sm:text-xl font-normal leading-relaxed"
          >
            Shape Your Body, Shape Your Life
          </h2>
        </div>
        <div class="flex flex-col items-center gap-5 w-full mt-8">
          <button
            onclick="switchView('view-signup')"
            class="group relative flex w-full h-14 items-center justify-center overflow-hidden rounded-full bg-primary px-8 text-black font-bold text-lg transition-all duration-300 hover:bg-primary-hover hover:scale-[1.02] active:scale-[0.98]"
          >
            <span class="relative z-10">Get Started</span>
          </button>
          <p class="text-gray-400 text-sm">
            Already have an account?
            <button
              onclick="switchView('view-login')"
              class="font-semibold text-primary underline decoration-transparent hover:decoration-primary transition-all duration-200 ml-1"
            >
              Log In
            </button>
          </p>
        </div>
      </div>
    </section>

    <!-- VIEW 2: LOG IN SCREEN -->
    <section
      id="view-login"
      class="view-section flex-col items-center justify-center overflow-hidden bg-background-light dark:bg-black p-4"
    >
      <button onclick="switchView('view-welcome')" class="glass-back-btn">
        <span class="material-symbols-outlined">arrow_back</span>
      </button>
      <div
        class="relative z-10 flex w-full max-w-md flex-col items-center animate-fade-in pt-12"
      >
        <h2 class="text-3xl font-bold tracking-tight mb-6">
          Fit<span class="text-forest dark:text-primary">Hub</span>
        </h2>
        <div
          class="w-full rounded-2xl bg-surface-light dark:bg-zinc-900 p-6 sm:p-8 shadow-soft dark:shadow-2xl border border-zinc-200 dark:border-zinc-800"
        >
          <div class="w-full mb-8">
            <h1
              class="text-center text-3xl font-bold leading-tight text-zinc-900 dark:text-white"
            >
              Welcome Back
            </h1>
          </div>
          <form id="login-form" class="space-y-6" onsubmit="handleLogin(event)">
            <div class="flex flex-col gap-2">
              <label
                class="text-sm font-medium text-zinc-600 dark:text-zinc-400"
                >Email</label
              >
              <input
                id="login-email"
                type="email"
                required
                placeholder="Enter your email"
                class="h-12 w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 px-4 text-zinc-900 dark:text-white focus:border-forest dark:focus:border-primary focus:ring-1 focus:ring-forest dark:focus:ring-primary focus:outline-none transition-all"
              />
            </div>
            <div class="flex flex-col gap-2">
              <label
                class="text-sm font-medium text-zinc-600 dark:text-zinc-400"
                >Password</label
              >
              <div class="relative w-full">
                <input
                  id="login-password"
                  type="password"
                  required
                  placeholder="Enter your password"
                  class="h-12 w-full rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 px-4 pr-12 text-zinc-900 dark:text-white focus:border-forest dark:focus:border-primary focus:ring-1 focus:ring-forest dark:focus:ring-primary focus:outline-none transition-all"
                />
                <button
                  type="button"
                  onclick="togglePassword('login-password')"
                  class="absolute inset-y-0 right-0 flex items-center pr-4 text-zinc-500 hover:text-black dark:hover:text-white"
                >
                  <span class="material-symbols-outlined text-[20px]"
                    >visibility</span
                  >
                </button>
              </div>
              <div class="flex justify-end">
                <button
                  type="button"
                  onclick="showForgotPassword()"
                  class="text-sm font-medium text-forest dark:text-primary hover:underline"
                >
                  Forgot Password?
                </button>
              </div>
            </div>
            <button
              id="login-btn"
              type="submit"
              class="w-full h-12 flex items-center justify-center rounded-lg bg-forest text-white dark:bg-primary dark:text-black font-bold text-base tracking-wide hover:bg-forest-hover dark:hover:bg-primary-hover transition-colors shadow-lg shadow-forest/20 dark:shadow-primary/20 disabled:opacity-70"
            >
              <span>Log In</span>
              <svg
                class="hidden w-5 h-5 ml-2 animate-spin-fast"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                ></path>
              </svg>
            </button>
          </form>
          <p class="mt-6 text-center text-sm text-zinc-500">
            Don't have an account?
            <button
              onclick="switchView('view-signup')"
              class="font-medium text-forest dark:text-primary hover:underline ml-1"
            >
              Sign Up
            </button>
          </p>
        </div>
      </div>
    </section>

    <!-- VIEW 3: SIGN UP SCREEN -->
    <section
      id="view-signup"
      class="view-section flex-col items-center justify-center min-h-screen bg-background-light dark:bg-background-dark p-4"
    >
      <button onclick="switchView('view-welcome')" class="glass-back-btn">
        <span class="material-symbols-outlined">arrow_back</span>
      </button>
      <div class="w-full max-w-md space-y-8 animate-fade-in py-8 pt-16">
        <h1
          class="w-full text-center text-3xl font-bold tracking-tight text-zinc-900 dark:text-white"
        >
          Create Account
        </h1>
        <form id="signup-form" class="space-y-5" onsubmit="handleSignup(event)">
          <div class="flex flex-col gap-2">
            <label class="text-sm font-medium text-zinc-600 dark:text-zinc-300"
              >Full Name</label
            ><input
              id="signup-name"
              type="text"
              required
              class="h-12 w-full rounded-xl border border-zinc-300 dark:border-none bg-white dark:bg-zinc-800 px-4 text-zinc-900 dark:text-white focus:ring-2 focus:ring-forest dark:focus:ring-primary transition-all"
            />
          </div>
          <div class="flex flex-col gap-2">
            <label class="text-sm font-medium text-zinc-600 dark:text-zinc-300"
              >Email Address</label
            ><input
              id="signup-email"
              type="email"
              required
              class="h-12 w-full rounded-xl border border-zinc-300 dark:border-none bg-white dark:bg-zinc-800 px-4 text-zinc-900 dark:text-white focus:ring-2 focus:ring-forest dark:focus:ring-primary transition-all"
            />
          </div>
          <div class="flex flex-col gap-2">
            <label class="text-sm font-medium text-zinc-600 dark:text-zinc-300"
              >Password</label
            >
            <div class="relative">
              <input
                id="signup-password"
                type="password"
                required
                class="h-12 w-full rounded-xl border border-zinc-300 dark:border-none bg-white dark:bg-zinc-800 px-4 pr-12 text-zinc-900 dark:text-white focus:ring-2 focus:ring-forest dark:focus:ring-primary transition-all"
              /><button
                type="button"
                onclick="togglePassword('signup-password')"
                class="absolute inset-y-0 right-0 flex items-center pr-4 text-zinc-500 hover:text-black dark:hover:text-white"
              >
                <span class="material-symbols-outlined text-[20px]"
                  >visibility_off</span
                >
              </button>
            </div>
          </div>
          <div class="flex items-center space-x-3 pt-2">
            <input
              id="terms"
              type="checkbox"
              required
              class="h-5 w-5 rounded border-zinc-400 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-forest dark:text-primary focus:ring-forest dark:focus:ring-primary"
            /><label class="text-sm text-zinc-500 select-none" for="terms"
              >I agree to
              <button
                type="button"
                onclick="switchView('view-terms')"
                class="font-medium text-forest dark:text-primary hover:underline"
              >
                Terms & Conditions
              </button></label
            >
          </div>
          <button
            id="signup-btn"
            type="submit"
            class="mt-4 flex h-14 w-full items-center justify-center rounded-xl bg-forest text-white dark:bg-primary dark:text-black font-bold text-base transition-transform hover:scale-[1.02] active:scale-[0.98] shadow-lg shadow-forest/20 dark:shadow-primary/20 disabled:opacity-70"
          >
            <span>Sign Up</span
            ><svg
              class="hidden w-5 h-5 ml-2 animate-spin-fast"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"
              ></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
          </button>
        </form>
        <p class="text-center text-sm text-zinc-500">
          Already have an account?
          <button
            onclick="switchView('view-login')"
            class="font-medium text-forest dark:text-primary hover:underline ml-1"
          >
            Log In
          </button>
        </p>
      </div>
    </section>

    <!-- NEW VIEW: TERMS & CONDITIONS -->
    <section
      id="view-terms"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark relative p-4"
    >
      <div
        class="w-full max-w-2xl mx-auto pt-10 pb-10 flex flex-col gap-6 animate-fade-in flex-1"
      >
        <h1
          class="text-3xl font-bold text-zinc-900 dark:text-white text-center"
        >
          Terms & Conditions
        </h1>
        <div
          class="bg-white dark:bg-surface-card p-6 md:p-8 rounded-2xl border border-zinc-200 dark:border-zinc-800 shadow-lg text-zinc-600 dark:text-zinc-300 space-y-4 max-h-[60vh] overflow-y-auto no-scrollbar"
        >
          <p>
            Welcome to FitHub. By accessing or using our mobile application, you
            agree to be bound by these Terms and Conditions.
          </p>
          <h3 class="text-lg font-bold text-zinc-900 dark:text-white">
            1. Use of the App
          </h3>
          <p>
            You must follow any guidelines or policies associated with the App.
            You must not misuse or interfere with the App's functionality.
          </p>
          <h3 class="text-lg font-bold text-zinc-900 dark:text-white">
            2. Health Disclaimer
          </h3>
          <p>
            FitHub provides fitness and nutritional information for educational
            purposes only. You should consult your physician or other health
            care professional before starting this or any other fitness program
            to determine if it is right for your needs.
          </p>
          <h3 class="text-lg font-bold text-zinc-900 dark:text-white">
            3. Privacy Policy
          </h3>
          <p>
            Your use of the App is also subject to our Privacy Policy, which
            covers how we collect, use, share, and store your personal
            information.
          </p>
          <p
            class="pt-4 text-sm italic border-t border-zinc-100 dark:border-zinc-700 mt-4"
          >
            Last updated: October 2025
          </p>
        </div>
        <div class="mt-auto pt-4 flex justify-center w-full">
          <button
            onclick="switchView('view-signup')"
            class="w-full max-w-sm h-14 bg-forest text-white dark:bg-primary dark:text-black font-bold text-lg rounded-xl hover:scale-[1.02] transition-transform shadow-lg shadow-forest/20 dark:shadow-primary/20"
          >
            I Understand
          </button>
        </div>
      </div>
    </section>

    <!-- VIEW 4: ONBOARDING -->
    <section
      id="view-onboarding"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark overflow-x-hidden"
    >
      <div class="layout-container flex h-full grow flex-col">
        <div
          class="px-4 md:px-10 lg:px-40 flex flex-1 justify-center py-5 animate-fade-in"
        >
          <div
            class="layout-content-container flex flex-col w-full max-w-[960px] flex-1"
          >
            <div class="flex flex-wrap justify-center text-center gap-3 p-4">
              <div class="flex w-full flex-col gap-3 items-center">
                <p
                  class="text-zinc-900 dark:text-white text-4xl font-black leading-tight"
                >
                  Tell us about yourself
                </p>
              </div>
            </div>
            <div class="w-full mx-auto p-4 space-y-6">
              <div
                class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto w-full"
              >
                <div class="flex flex-col space-y-2">
                  <label
                    class="text-sm font-medium text-zinc-600 dark:text-zinc-300"
                    >Age</label
                  ><input
                    id="onboarding-age"
                    type="text"
                    inputmode="numeric"
                    placeholder="In Years"
                    class="h-12 w-full rounded-xl border border-zinc-300 dark:border-none bg-white dark:bg-zinc-800 px-4 text-zinc-900 dark:text-white focus:ring-2 focus:ring-forest dark:focus:ring-primary text-center text-lg font-medium"
                  />
                </div>
                <div class="flex flex-col space-y-2">
                  <label
                    class="text-sm font-medium text-zinc-600 dark:text-zinc-300"
                    >Gender</label
                  >
                  <div class="flex gap-3 h-12">
                    <button
                      type="button"
                      onclick="selectGender('male')"
                      id="gender-male"
                      class="flex-1 rounded-xl border border-zinc-300 dark:border-zinc-800 bg-white dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 font-bold hover:bg-zinc-100 dark:hover:bg-zinc-700"
                    >
                      Male</button
                    ><button
                      type="button"
                      onclick="selectGender('female')"
                      id="gender-female"
                      class="flex-1 rounded-xl border border-zinc-300 dark:border-zinc-800 bg-white dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 font-bold hover:bg-zinc-100 dark:hover:bg-zinc-700"
                    >
                      Female
                    </button>
                  </div>
                  <input type="hidden" id="selected-gender" value="" />
                </div>
              </div>
              <div
                class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto w-full"
              >
                <div class="flex flex-col space-y-2">
                  <label
                    class="text-sm font-medium text-zinc-600 dark:text-zinc-300"
                    >Height (cm)</label
                  ><input
                    id="onboarding-height"
                    type="number"
                    placeholder="180"
                    class="h-12 w-full rounded-xl border border-zinc-300 dark:border-none bg-white dark:bg-zinc-800 px-4 text-zinc-900 dark:text-white focus:ring-2 focus:ring-forest dark:focus:ring-primary text-lg font-medium"
                  />
                </div>
                <div class="flex flex-col space-y-2">
                  <label
                    class="text-sm font-medium text-zinc-600 dark:text-zinc-300"
                    >Weight (kg)</label
                  ><input
                    id="onboarding-weight"
                    type="number"
                    placeholder="75"
                    class="h-12 w-full rounded-xl border border-zinc-300 dark:border-none bg-white dark:bg-zinc-800 px-4 text-zinc-900 dark:text-white focus:ring-2 focus:ring-forest dark:focus:ring-primary text-lg font-medium"
                  />
                </div>
              </div>
              <div class="space-y-6 pt-4">
                <h2
                  class="text-center text-xl font-bold text-zinc-900 dark:text-white"
                >
                  What is your primary goal?
                </h2>
                <div
                  class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"
                >
                  <div
                    onclick="selectGoal(this, 'lose_weight')"
                    class="goal-card group cursor-pointer relative flex flex-col items-center justify-center gap-3 rounded-xl border border-zinc-300 dark:border-zinc-800 bg-white dark:bg-zinc-800 p-6 text-center transition-all hover:border-zinc-400 dark:hover:border-zinc-600 shadow-soft dark:shadow-none"
                  >
                    <span
                      class="material-symbols-outlined text-4xl text-zinc-900 dark:text-white"
                      >width</span
                    >
                    <p
                      class="text-zinc-900 dark:text-white text-base font-bold"
                    >
                      Lose Weight
                    </p>
                    <div
                      class="hidden check-icon absolute top-3 right-3 flex h-6 w-6 items-center justify-center rounded-full bg-forest dark:bg-primary"
                    >
                      <span
                        class="material-symbols-outlined text-lg text-white dark:text-black font-bold"
                        >check</span
                      >
                    </div>
                  </div>
                  <div
                    onclick="selectGoal(this, 'build_muscle')"
                    class="goal-card group cursor-pointer relative flex flex-col items-center justify-center gap-3 rounded-xl border border-forest dark:border-primary bg-forest/10 dark:bg-primary/5 p-6 text-center transition-all ring-2 ring-forest dark:ring-primary ring-offset-4 ring-offset-background-light dark:ring-offset-background-dark shadow-soft dark:shadow-none"
                  >
                    <div
                      class="check-icon absolute top-3 right-3 flex h-6 w-6 items-center justify-center rounded-full bg-forest dark:bg-primary"
                    >
                      <span
                        class="material-symbols-outlined text-lg text-white dark:text-[#121212]"
                        >check</span
                      >
                    </div>
                    <span
                      class="material-symbols-outlined text-4xl text-forest dark:text-primary"
                      >fitness_center</span
                    >
                    <p
                      class="text-forest dark:text-primary text-base font-bold"
                    >
                      Build Muscle
                    </p>
                  </div>
                  <div
                    onclick="selectGoal(this, 'endurance')"
                    class="goal-card group cursor-pointer relative flex flex-col items-center justify-center gap-3 rounded-xl border border-zinc-300 dark:border-zinc-800 bg-white dark:bg-zinc-800 p-6 text-center transition-all hover:border-zinc-400 dark:hover:border-zinc-600 shadow-soft dark:shadow-none"
                  >
                    <span
                      class="material-symbols-outlined text-4xl text-zinc-900 dark:text-white"
                      >directions_run</span
                    >
                    <p
                      class="text-zinc-900 dark:text-white text-base font-bold"
                    >
                      Improve Endurance
                    </p>
                    <div
                      class="hidden check-icon absolute top-3 right-3 flex h-6 w-6 items-center justify-center rounded-full bg-forest dark:bg-primary"
                    >
                      <span
                        class="material-symbols-outlined text-lg text-white dark:text-black font-bold"
                        >check</span
                      >
                    </div>
                  </div>
                </div>
                <input type="hidden" id="selected-goal" value="build_muscle" />
              </div>
            </div>
            <div class="flex justify-center pt-4 pb-8">
              <div
                class="flex w-full flex-1 gap-3 flex-wrap px-4 py-3 max-w-[480px] justify-center"
              >
                <button
                  onclick="handleLogout()"
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 bg-white dark:bg-[#393928] border border-zinc-300 dark:border-none text-zinc-900 dark:text-white text-base font-bold grow transition-colors hover:bg-zinc-100 dark:hover:bg-[#4a4a38] shadow-sm"
                >
                  <span class="truncate">Back</span></button
                ><button
                  onclick="handleOnboardingSubmit()"
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 bg-forest text-white dark:bg-primary dark:text-black font-bold text-base grow transition-transform hover:scale-105 shadow-lg shadow-forest/20 dark:shadow-primary/20"
                >
                  <span class="truncate">Continue</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW 5: DASHBOARD -->
    <section
      id="view-dashboard"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark relative pb-20"
    >
      <div class="layout-container flex h-full grow flex-col">
        <div
          class="flex flex-1 justify-center p-6 sm:p-8 md:p-10 animate-fade-in-up"
        >
          <div
            class="layout-content-container flex w-full max-w-7xl flex-1 flex-col"
          >
            <header class="flex items-center justify-between pb-6">
              <h1
                id="dashboard-greeting"
                class="text-zinc-900 dark:text-white tracking-tight text-2xl md:text-3xl font-bold leading-tight"
              >
                Good Morning,
                <span
                  id="dashboard-username"
                  class="text-forest dark:text-primary"
                  >User</span
                >
              </h1>
              <div class="flex items-center gap-3">
                <button
                  onclick="switchView('view-bmi')"
                  class="flex h-10 w-10 items-center justify-center rounded-lg bg-surface-light dark:bg-surface-card border border-zinc-200 dark:border-zinc-700 text-zinc-500 dark:text-zinc-400 hover:text-forest dark:hover:text-primary hover:border-forest dark:hover:border-primary transition-all shadow-sm"
                >
                  <span class="material-symbols-outlined">calculate</span>
                </button>
                <div
                  class="flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-forest/10 dark:bg-primary/20 pl-3 pr-4 border border-forest/10 dark:border-primary/10"
                >
                  <span
                    class="material-symbols-outlined text-forest dark:text-primary text-xl filled"
                    >local_fire_department</span
                  >
                  <p
                    class="text-forest dark:text-primary text-sm font-medium leading-normal"
                  >
                    3 Day Streak
                  </p>
                </div>
              </div>
            </header>
            <main class="grid flex-1 grid-cols-1 gap-6 md:grid-cols-2">
              <div
                onclick="switchView('view-workouts')"
                class="bg-cover bg-center flex flex-col gap-3 rounded-xl justify-end p-6 md:p-8 relative min-h-[40vh] md:min-h-0 border border-black/5 dark:border-white/5 group cursor-pointer transition-transform hover:scale-[1.01] shadow-soft dark:shadow-none"
                style="
                  background-image: linear-gradient(
                      0deg,
                      rgba(0, 0, 0, 0.8) 0%,
                      rgba(0, 0, 0, 0.2) 60%,
                      rgba(0, 0, 0, 0) 100%
                    ),
                    url('https://lh3.googleusercontent.com/aida-public/AB6AXuC-yyN1OZ9Sa5Y7zEz4qcGh2_8CWhzOQa5t4aCJkcqpxxkdbwQPCjMKLed9c5UsVTfCWTvU9M-mnhjoR_IXoi09tx7f0wU9iwVIeJMJ6yZu1ICHlgxZyf2oyP8QL5BzJR7YSSAA7mVmemztEpbo4uVOdUf_ouLiKHUpsR7Dj70N0zO-PIgzutZf1Ia-xYjqQ3sYdLmXVaQfq80wJz9EO6eNiuP58vB9Iuugm20XkHALmj36ZtxQ6dvqK2kSyW9YJ1g81BryXb6kmg');
                "
              >
                <p class="text-white text-3xl font-bold leading-tight">
                  Start Workout
                </p>
                <div
                  class="absolute bottom-6 right-6 md:bottom-8 md:right-8 flex h-14 w-14 items-center justify-center rounded-full bg-forest dark:bg-primary shadow-[0_0_20px_rgba(30,66,51,0.3)] dark:shadow-[0_0_20px_rgba(203,230,53,0.3)] group-hover:scale-110 transition-transform"
                >
                  <span
                    class="material-symbols-outlined text-white dark:text-black text-4xl filled"
                    >play_arrow</span
                  >
                </div>
              </div>
              <div
                class="bg-cover bg-center flex flex-col gap-3 rounded-xl justify-end p-6 md:p-8 relative min-h-[40vh] md:min-h-0 border border-black/5 dark:border-white/5 group cursor-pointer transition-transform hover:scale-[1.01] shadow-soft dark:shadow-none"
                style="
                  background-image: linear-gradient(
                      0deg,
                      rgba(0, 0, 0, 0.8) 0%,
                      rgba(0, 0, 0, 0.2) 60%,
                      rgba(0, 0, 0, 0) 100%
                    ),
                    url('https://lh3.googleusercontent.com/aida-public/AB6AXuAGSY3KxiZRmtktGAd_kb0DO5aMkY1Tgq2lDOTqaPmkQ0CTzbxCjotK5rSKplr1oO0t1BMJtokbuMHkoQUx07Q5saSpZ90BoczLBbdPzgO2MqDJ-4SUo2FermcVKPTKQMbXghfv4Lux6UvTPbmF1Ugrh0sKoX_1_YCWZtyMlbTpuBjz8h8M0SecSA_JFhptB95k0gKl60ghTpmXcColoU5Dhb99Yf7bBzG3_bmDSCz-EWuZFWaD4QpXPqb87UnMzrRwUOOqBq_Jnw');
                "
              >
                <p class="text-white text-3xl font-bold leading-tight">
                  View Meal Plan
                </p>
                <div
                  class="absolute bottom-6 right-6 md:bottom-8 md:right-8 flex h-14 w-14 items-center justify-center rounded-full bg-forest dark:bg-primary shadow-[0_0_20px_rgba(30,66,51,0.3)] dark:shadow-[0_0_20px_rgba(203,230,53,0.3)] group-hover:scale-110 transition-transform"
                >
                  <span
                    class="material-symbols-outlined text-white dark:text-black text-4xl filled"
                    >restaurant</span
                  >
                </div>
              </div>
            </main>
            <div class="grid grid-cols-1 gap-4 pt-6 sm:grid-cols-2">
              <div
                onclick="openWaterTracker()"
                class="flex flex-col gap-3 rounded-2xl bg-surface-light dark:bg-surface-card p-5 border border-black/5 dark:border-white/5 shadow-soft dark:shadow-none cursor-pointer hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors group"
              >
                <div class="flex items-baseline justify-between gap-6">
                  <p
                    class="text-zinc-900 dark:text-white text-base font-medium leading-normal"
                  >
                    Water
                  </p>
                  <p
                    id="dash-water-text"
                    class="text-forest dark:text-primary text-sm font-bold leading-normal"
                  >
                    0L
                  </p>
                </div>
                <div class="rounded-full bg-zinc-200 dark:bg-stone-700 h-2">
                  <div
                    id="dash-water-bar"
                    class="h-2 rounded-full bg-water-blue transition-all duration-500"
                    style="width: 0%"
                  ></div>
                </div>
              </div>
              <div
                class="flex items-center justify-between rounded-2xl bg-surface-light dark:bg-surface-card p-5 border border-black/5 dark:border-white/5 shadow-soft dark:shadow-none"
              >
                <p
                  class="text-zinc-900 dark:text-white text-base font-medium leading-normal"
                >
                  Calories
                </p>
                <p
                  class="text-zinc-900 dark:text-white text-lg font-bold leading-normal"
                >
                  1200
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Floating Nav -->
      <nav
        class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-sm z-50"
      >
        <div
          class="flex h-16 items-center justify-around rounded-full bg-white/90 dark:bg-[#1c1c1e]/90 backdrop-blur-md border border-black/5 dark:border-white/10 shadow-2xl"
        >
          <a
            class="flex flex-col items-center justify-center gap-1 text-forest dark:text-primary cursor-pointer"
            onclick="switchView('view-dashboard')"
            ><span class="material-symbols-outlined filled text-2xl">home</span
            ><span class="text-xs font-medium">Home</span></a
          >
          <a
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-black dark:hover:text-white transition-colors cursor-pointer"
            onclick="switchView('view-workouts')"
            ><span class="material-symbols-outlined text-2xl"
              >fitness_center</span
            ><span class="text-xs font-medium">Workouts</span></a
          >
          <a
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-black dark:hover:text-white transition-colors cursor-pointer"
            href="#"
            ><span class="material-symbols-outlined text-2xl">lunch_dining</span
            ><span class="text-xs font-medium">Diet</span></a
          >
          <button
            onclick="switchView('view-settings')"
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-forest dark:hover:text-primary transition-colors cursor-pointer"
          >
            <span class="material-symbols-outlined text-2xl">person</span
            ><span class="text-xs font-medium">Profile</span>
          </button>
        </div>
      </nav>
    </section>

    <!-- VIEW 8: BMI CALCULATOR -->
    <section
      id="view-bmi"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark overflow-x-hidden"
    >
      <div
        class="relative flex flex-col w-full max-w-2xl mx-auto p-4 sm:p-6 min-h-screen"
      >
        <button onclick="switchView('view-dashboard')" class="glass-back-btn">
          <span class="material-symbols-outlined">arrow_back</span>
        </button>
        <header class="flex items-center justify-center pb-6 pt-12">
          <h1 class="text-2xl font-bold text-zinc-900 dark:text-white">
            BMI Calculator
          </h1>
        </header>
        <div class="flex flex-col gap-6 animate-fade-in">
          <div
            class="bg-surface-light dark:bg-surface-card rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-soft dark:shadow-none"
          >
            <div class="grid grid-cols-2 gap-4">
              <div class="flex flex-col gap-2 relative">
                <label
                  class="text-sm font-medium text-zinc-500 dark:text-zinc-400"
                  >Height (cm)</label
                ><input
                  id="bmi-height"
                  type="number"
                  placeholder="180"
                  class="h-12 w-full rounded-xl border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-center text-lg font-bold text-zinc-900 dark:text-white focus:ring-forest dark:focus:ring-primary transition-all"
                />
                <button
                  onclick="toggleHeightConverter()"
                  class="text-xs text-forest dark:text-primary font-medium text-right hover:underline mt-1"
                >
                  Convert from Ft
                </button>
                <div
                  id="height-converter"
                  class="hidden absolute top-full left-0 w-full mt-2 bg-white dark:bg-zinc-800 p-3 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-xl z-20"
                >
                  <div class="mb-2">
                    <input
                      id="conv-feet-input"
                      type="text"
                      placeholder="e.g. 5.10"
                      class="w-full h-10 rounded-lg border border-zinc-300 dark:border-zinc-600 bg-zinc-50 dark:bg-zinc-900 text-center text-zinc-900 dark:text-white focus:ring-forest dark:focus:ring-primary font-bold"
                    />
                    <p class="text-[10px] text-zinc-400 text-center mt-1">
                      Format: Feet.Inches (5.10 = 5'10")
                    </p>
                  </div>
                  <button
                    onclick="applyHeightConversion()"
                    class="w-full h-8 bg-forest text-white dark:bg-primary dark:text-black text-sm font-bold rounded-lg hover:bg-forest-hover dark:hover:bg-primary-hover"
                  >
                    Apply
                  </button>
                </div>
              </div>
              <div class="flex flex-col gap-2">
                <label
                  class="text-sm font-medium text-zinc-500 dark:text-zinc-400"
                  >Weight (kg)</label
                ><input
                  id="bmi-weight"
                  type="number"
                  class="h-12 w-full rounded-xl border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-center text-lg font-bold text-zinc-900 dark:text-white focus:ring-forest dark:focus:ring-primary transition-all"
                />
              </div>
            </div>
            <button
              onclick="calculateBMI()"
              class="w-full mt-6 h-12 bg-forest text-white dark:bg-primary dark:text-black font-bold rounded-xl hover:scale-[1.02] transition-transform shadow-lg shadow-forest/20 dark:shadow-primary/20"
            >
              Calculate BMI
            </button>
          </div>
          <div id="bmi-result-card" class="hidden flex-col gap-6">
            <div
              class="bg-surface-light dark:bg-surface-card rounded-2xl border border-zinc-200 dark:border-zinc-800 p-8 text-center relative overflow-hidden shadow-soft dark:shadow-none"
            >
              <div class="relative z-10">
                <p
                  class="text-sm font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wide"
                >
                  Your BMI Score
                </p>
                <h2
                  id="bmi-score"
                  class="text-6xl font-black text-zinc-900 dark:text-white mt-2 mb-1"
                >
                  --
                </h2>
                <p
                  id="bmi-category"
                  class="text-xl font-bold text-forest dark:text-primary"
                >
                  Normal Weight
                </p>
              </div>
              <div
                class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-forest/5 dark:bg-primary/5 rounded-full blur-2xl pointer-events-none"
              ></div>
            </div>
            <div
              class="bg-surface-light dark:bg-surface-card rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-soft dark:shadow-none"
            >
              <div
                class="flex justify-between text-xs font-medium text-zinc-400 mb-2"
              >
                <span>15</span><span>18.5</span><span>25</span><span>30</span
                ><span>40</span>
              </div>
              <div class="relative h-4 w-full rounded-full bmi-gradient mb-2">
                <div
                  id="bmi-pointer"
                  class="absolute -top-1 h-6 w-1 bg-white border-2 border-black dark:border-white transition-all duration-500 ease-out"
                  style="left: 0%"
                ></div>
              </div>
              <p
                class="text-center text-xs text-zinc-500 dark:text-zinc-400 mt-2"
              >
                Healthy range for your height:
                <span
                  id="bmi-healthy-range"
                  class="text-zinc-900 dark:text-white font-bold"
                  >--</span
                >
              </p>
            </div>
            <div
              class="bg-surface-light dark:bg-surface-card rounded-2xl border border-zinc-200 dark:border-zinc-800 p-6 shadow-soft dark:shadow-none"
            >
              <h3 class="text-lg font-bold text-zinc-900 dark:text-white mb-3">
                Analysis
              </h3>
              <p
                id="bmi-analysis"
                class="text-zinc-600 dark:text-zinc-300 text-sm leading-relaxed"
              >
                Calculate your BMI to see personalized health insights here.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW 9: WORKOUTS CATEGORIES -->
    <section
      id="view-workouts"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark relative pb-20"
    >
      <div class="layout-container flex h-full grow flex-col">
        <div
          class="flex flex-1 justify-center p-6 sm:p-8 md:p-10 animate-fade-in-up"
        >
          <div
            class="layout-content-container flex w-full max-w-7xl flex-1 flex-col"
          >
            <button
              onclick="switchView('view-dashboard')"
              class="glass-back-btn"
            >
              <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <header class="flex flex-col gap-2 pb-6 pt-12">
              <h1
                class="text-3xl md:text-4xl font-black text-zinc-900 dark:text-white leading-tight"
              >
                Choose Your Equipment / Style
              </h1>
              <p class="text-zinc-500 dark:text-zinc-400 text-sm md:text-base">
                Select a category to see available workout plans.
              </p>
            </header>
            <main
              class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6"
            >
              <!-- Grid Items -->
              <div
                onclick="openWorkoutDetail('dumbbells')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuCFZvZrbazlyPe5nxb0Q29FmBCeX-31401E5VFx3C33uZPeOpTxyobDLOI5Fm35hHH3WP9jhfbfX_7FvfQ2sJDkBFWsHtaOxjec7IayVHr96fufAv1ILWCoM1pc53QhNZkY6qP-lrH5-Kz8h2660eLQt5YlH0vWOwVd68m2z_nK7pj-Q3mLWJ2fF3SuojQIt2XZh6ss1qvHXrG2rSX8-zWDBkHUpwYPXXwu_8pWx_xzpZpeJLE28pRwZIY2HwYr7RqNFeTBe8HIrQ');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Dumbbells
                  </p>
                </div>
              </div>
              <!-- ... Other Cards ... -->
              <div
                onclick="openWorkoutDetail('barbell')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuCf8ZYyVSOOjduHUQ2YuwtbppyDEoWPC2Vyy2GJUGH_VuDfO1pdJm-heY3YHN9AGNzy46MLpPO3JUvb3B4RXIfkY5kEiOlAO5FVTuFOcrbc92PuDdXcMhGGAbz0u8VSwrhJTMyKvR_0iJwQUVpY7_j_G8zvufbfiayHJAUzqky5ozeX-FZdyUSEomaylg3cRUtEQWtcdhwVX8JhQYTJPcw3p-C82tVgdBJlo5bwd34RNWy9_RaLCUPStTMswACUczKGz3KbzEkHSg');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Barbell
                  </p>
                </div>
              </div>
              <div
                onclick="openWorkoutDetail('bodyweight')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuD8gXWe4Nhd7Xrr-r-XRhGo16vr8Y1eGLXpnWinuAXaZFSPfLqh5mixq7tjSMq03wSoh9_diMd0KCK2phrKrMLbqQISj0cRjasTVdgakch0u41H4hHbOcPjjfMLh4kLqcIr2gQaPnvJIQJL2cwyD9okE5h3Ir_KDZJ5av0ZLPtZjPLpc4gx9RZVbNHyBHuCh6R7vO8dTJceCO2XqByKdPkTvgRsxZQj9-USdSB9Hwj4DFI3GUF57bE1Z8JhTrPawzpN0ib6UaV-Rw');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Bodyweight
                  </p>
                </div>
              </div>
              <div
                onclick="openWorkoutDetail('cardio')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuCHyDKlcBwjY_k3IVFrliSwtcSzgQqOh2uun1XKGXGsV7TfHxyNx_TvjUdh6z4-_DEsMLLLgxBJpShvAASqpDf_J6X2QkDsWP1i5ZT19D7SNwoY05NF89SGBddpF-EVgKbEIazHan4aTrpySJBtLtqtrHdIz9AdHMy3mt5MiDanbCAjyxjuvkGSgH3jMbKBEXOqU73vvheAQ_XVT4oZgXkhUPW4j2xk0S_bDoXRt4gtRNIPsMmgMRs-2yn7wcVrQGqJGtE771pjPg');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Cardio
                  </p>
                </div>
              </div>
              <div
                onclick="openWorkoutDetail('kettlebells')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuAX_9KLEXq51bvYM-W_SE9Ll4aLlgtmLc3aPE7GAdBcb2yPWAimGHwiCql2sdv1pdFUZCKIhfB6-Suj32vnSGLDGPIIP785uqoWUenjFNq6kRCCHzoR_bcZV8mzMc7v84S1UXymI1HQPEY7aiFzKoRiUrt1luKYfzmBYuzRgkGt8adSQr_qas1Qx-EWGAJLrtvPNSNJs-MK8y5A9glxmpk_RrlhWTFdZc24W1n4_6xQseRQzUHEgTZbb4EwppLBd8a7r2nf5C1kug');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Kettlebells
                  </p>
                </div>
              </div>
              <div
                onclick="openWorkoutDetail('bands')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuCk5mkYjM8E8IY7Z-s3on_q7t4Naa6SzGW5zHNOjtKZkpxIENYo7fbsj5LEja8IY45UdFXFp50kY5HMyyHggtiadAFuCT1RhdkWVni8hasg2U9ChVExudDB1riFhZDImPI9CYb7LFECMP9hS-7FayWVmQ8zJuwoxnbeBy9NySOSkt0I5B0NZx6lueu1Npd-5REU6Z8pG8FNh_0KcgUhk3xrLRUIn_tnXOd0DHAZAh2v0syEm7e0yUxPRK4Xu7EkpxYyD5pr8VZ4Gg');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Resistance Bands
                  </p>
                </div>
              </div>
              <div
                onclick="openWorkoutDetail('calisthenics')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuCHJ0BbjfJd_Vo_jvd-77cyqLX2fC_P81_exoZahAXa9aAyau0yUR1H_kBpShXk8kZ3YrG4DclH-qilqQ8xSpDb0KdJz44RPGvKNGD1OZzdIOpWQnZS6Dx5uRUn-f4PPgfTOanzcYS1EJAQi00u2s36PLJCnP0brIs_4mz_Uuef9ykcm0vo9QNbMPqH0-rJ1kDkKEXJccEPFtWJe3lo6ONbTzgnYMOyYdYm7zhdWYbuNsDV9K4A5NfHdoUiuVsnWcRxSh_kjTLFXg');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Calisthenics
                  </p>
                </div>
              </div>
              <div
                onclick="openWorkoutDetail('yoga')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuCRqWic08-1C18pvBcZLJ4bRT54y1kypImSQH7aAjNp5tIgwJ3_Dzo8B_03QNIg5-32o-gXDllcwth7EW0DpwT6MuKXdutFOj4Z8kbvelsOnCfl81Ve35Eu_p1oZnEPY7Y-d_Eb4rhodQhc5wsH_gfITCqQkypxapTANHnvzqxo4b5cWKt1ABOuBH0CqCYbUi7XHgpvMRBvQbMI27ndlh4uh7ckZ7t7SHWptdg7EdRlm6opyo7sRRKjM5no76RX8N_kkxCe56_ySw');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Yoga
                  </p>
                </div>
              </div>
              <div
                onclick="openWorkoutDetail('hiit')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuCmkIhQWYHqqTYA-4snsGroUGVtnYeMheUR6aAWYkgB8vuz1p_mh-cyBf4zrOCK-sLNXjLnpJuQof92hE0TTVvX3CCg1Dl89-XfYvA5U95ke8b9tZMcSKZVby-_krHbdal-drEnObXzG_9mhuvCLiwQESMIkYxGBzKUu2BRITuhIkRwyq4vuvWTnC9isnTy0Y53b4l3vLmBwlMZGOI9rwnjSJs58f1HrC1bqSpS6tie_uU9lvr2U4g4C5kNNvC2w1q0_kUyq4R-HQ');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    HIIT
                  </p>
                </div>
              </div>
              <div
                onclick="openWorkoutDetail('pilates')"
                class="relative group cursor-pointer overflow-hidden rounded-2xl shadow-soft dark:shadow-none aspect-[4/3] md:aspect-square"
              >
                <div
                  class="absolute inset-0 bg-cover bg-center transition-transform duration-300 ease-in-out group-hover:scale-105"
                  style="
                    background-image: linear-gradient(
                        0deg,
                        rgba(0, 0, 0, 0.6) 0%,
                        rgba(0, 0, 0, 0) 60%
                      ),
                      url('https://lh3.googleusercontent.com/aida-public/AB6AXuAbkKSNu25f6oIYRoBrKS-8esQX1uF4o8J_D2Whx5eHfVW8fvbzgPRsdqWSpC4gBiDpF66UXgUwxbTnpS81Dib_MJGd4rYXXGCJdjahIugHfI8iYfAGEFJJZ1eymoWwuVCRdoNQOUIv5h83aH2HLB37MdAOF9lwWa6HOjWp3uaQdll5nh9KMNgJdBJ8Oi1lWJw0PuTGNjtSRN4JnRmZSbN8y_D3wb4Vi676WASZGGuFXRQTlj3D2lNezU_a6SHz437Q_VY7J84LUQ');
                  "
                ></div>
                <div
                  class="absolute inset-0 ring-4 ring-transparent group-hover:ring-forest dark:group-hover:ring-primary transition-all duration-300 rounded-2xl"
                ></div>
                <div
                  class="relative flex flex-col gap-1 justify-end p-4 md:p-6 h-full"
                >
                  <p
                    class="text-lg md:text-2xl font-bold leading-tight text-white"
                  >
                    Pilates
                  </p>
                </div>
              </div>
            </main>
          </div>
        </div>
      </div>
      <!-- Floating Nav ... -->
      <nav
        class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-sm z-50"
      >
        <div
          class="flex h-16 items-center justify-around rounded-full bg-white/90 dark:bg-[#1c1c1e]/90 backdrop-blur-md border border-black/5 dark:border-white/10 shadow-2xl"
        >
          <a
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-black dark:hover:text-white transition-colors cursor-pointer"
            onclick="switchView('view-dashboard')"
            ><span class="material-symbols-outlined text-2xl">home</span
            ><span class="text-xs font-medium">Home</span></a
          >
          <a
            class="flex flex-col items-center justify-center gap-1 text-forest dark:text-primary cursor-pointer"
            onclick="switchView('view-workouts')"
            ><span class="material-symbols-outlined filled text-2xl"
              >fitness_center</span
            ><span class="text-xs font-medium">Workouts</span></a
          >
          <a
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-black dark:hover:text-white transition-colors cursor-pointer"
            href="#"
            ><span class="material-symbols-outlined text-2xl">lunch_dining</span
            ><span class="text-xs font-medium">Diet</span></a
          >
          <button
            onclick="switchView('view-settings')"
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-forest dark:hover:text-primary transition-colors cursor-pointer"
          >
            <span class="material-symbols-outlined text-2xl">person</span
            ><span class="text-xs font-medium">Profile</span>
          </button>
        </div>
      </nav>
    </section>

    <!-- VIEW 10: WORKOUT DETAIL VIEW -->
    <section
      id="view-workout-detail"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark relative overflow-x-hidden"
    >
      <div class="relative flex min-h-screen w-full flex-col group/design-root">
        <div class="layout-container flex h-full grow flex-col">
          <button onclick="switchView('view-workouts')" class="glass-back-btn">
            <span class="material-symbols-outlined">arrow_back</span>
          </button>
          <main
            class="flex-1 px-4 sm:px-8 md:px-10 py-10 pb-32 animate-fade-in pt-20"
          >
            <div class="mx-auto max-w-7xl">
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16">
                <div class="flex flex-col gap-6">
                  <div
                    onclick="playVideo()"
                    class="relative cursor-pointer group flex items-center justify-center bg-zinc-100 dark:bg-zinc-800 bg-cover bg-center aspect-video rounded-xl overflow-hidden shadow-2xl shadow-black/10 dark:shadow-black/30"
                  >
                    <div
                      class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"
                    ></div>
                    <div
                      id="wd-image"
                      class="absolute inset-0 bg-cover bg-center transition-all duration-500 group-hover:scale-105"
                    ></div>
                    <button
                      class="relative z-10 flex h-20 w-20 shrink-0 items-center justify-center rounded-full bg-black/50 text-white backdrop-blur-sm transition-transform group-hover:scale-110"
                    >
                      <span
                        class="material-symbols-outlined text-inherit"
                        style="font-size: 48px; transform: translateX(2px)"
                        >play_arrow</span
                      >
                    </button>
                  </div>
                </div>
                <div class="flex flex-col">
                  <div class="flex flex-col gap-8">
                    <h1
                      id="wd-title"
                      class="text-forest dark:text-primary text-4xl sm:text-5xl lg:text-6xl font-black leading-tight tracking-tighter"
                    >
                      --
                    </h1>
                    <div class="grid grid-cols-3 gap-4">
                      <div
                        class="flex flex-col gap-2 rounded-xl bg-white dark:bg-surface-card p-4 sm:p-6 border border-zinc-200 dark:border-none shadow-sm dark:shadow-none"
                      >
                        <p
                          class="text-zinc-500 dark:text-white/60 text-sm font-medium leading-normal"
                        >
                          Sets
                        </p>
                        <p
                          id="wd-sets"
                          class="text-zinc-900 dark:text-white text-3xl sm:text-4xl font-bold leading-tight"
                        >
                          --
                        </p>
                      </div>
                      <div
                        class="flex flex-col gap-2 rounded-xl bg-white dark:bg-surface-card p-4 sm:p-6 border border-zinc-200 dark:border-none shadow-sm dark:shadow-none"
                      >
                        <p
                          class="text-zinc-500 dark:text-white/60 text-sm font-medium leading-normal"
                        >
                          Reps
                        </p>
                        <p
                          id="wd-reps"
                          class="text-zinc-900 dark:text-white text-3xl sm:text-4xl font-bold leading-tight"
                        >
                          --
                        </p>
                      </div>
                      <div
                        class="flex flex-col gap-2 rounded-xl bg-white dark:bg-surface-card p-4 sm:p-6 border border-zinc-200 dark:border-none shadow-sm dark:shadow-none"
                      >
                        <p
                          class="text-zinc-500 dark:text-white/60 text-sm font-medium leading-normal"
                        >
                          Rest
                        </p>
                        <p
                          id="wd-rest"
                          class="text-zinc-900 dark:text-white text-3xl sm:text-4xl font-bold leading-tight"
                        >
                          --
                        </p>
                      </div>
                    </div>
                    <div class="flex flex-col gap-4 pt-4">
                      <h2
                        class="text-zinc-900 dark:text-white text-2xl font-bold leading-tight tracking-tight"
                      >
                        Instructions
                      </h2>
                      <div
                        id="wd-desc"
                        class="text-zinc-600 dark:text-white/70 text-base font-normal leading-relaxed space-y-4 max-w-prose"
                      >
                        <!-- Dynamic Content -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>
          <div class="fixed bottom-0 right-0 left-0 lg:left-1/2 z-20">
            <div
              class="bg-gradient-to-t from-background-light via-background-light to-transparent dark:from-background-dark dark:via-background-dark px-4 sm:px-8 md:px-10 py-6"
            >
              <button
                onclick="startSession()"
                class="w-full h-14 bg-forest text-white dark:bg-primary dark:text-background-dark text-lg font-bold rounded-lg hover:bg-forest-hover dark:hover:bg-primary-hover transition-colors shadow-lg shadow-forest/20 dark:shadow-primary/20 hover:scale-[1.01] active:scale-[0.99]"
              >
                Start Session
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW 11: LIVE SESSION (NEW) -->
    <section
      id="view-live-session"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark relative overflow-x-hidden"
    >
      <div class="relative flex min-h-screen w-full flex-col">
        <div class="flex h-full grow flex-col">
          <div class="flex flex-1 justify-center p-4 sm:p-6 md:p-8">
            <div class="flex w-full max-w-2xl flex-col">
              <!-- Clean Header: Large Title, No extra icons -->
              <header
                class="flex flex-col items-center justify-center whitespace-nowrap border-b border-zinc-200 dark:border-white/10 px-2 pb-4 sm:px-4 sm:pb-6 relative"
              >
                <h2
                  id="live-title"
                  class="text-3xl sm:text-4xl font-black leading-tight tracking-[-0.015em] text-center text-zinc-900 dark:text-white animate-fade-in"
                >
                  Workout
                </h2>
              </header>
              <main
                class="flex flex-1 flex-col justify-between pt-8 sm:pt-12 md:pt-16"
              >
                <div class="flex flex-col items-center">
                  <!-- Dynamic Status Label -->
                  <p
                    id="live-status-label"
                    class="text-forest dark:text-primary text-lg font-bold uppercase tracking-widest leading-normal pb-4 pt-1 text-center font-display animate-pulse-slow"
                  >
                    WARM UP
                  </p>
                  <!-- Timer -->
                  <div
                    class="relative w-full aspect-[2/1] max-w-lg flex items-center justify-center bg-white dark:bg-zinc-900 rounded-3xl border border-zinc-200 dark:border-white/10 shadow-2xl p-4 overflow-hidden"
                  >
                    <div
                      class="absolute inset-0 bg-cover opacity-5"
                      style="
                        background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre-v2.png');
                      "
                    ></div>
                    <div
                      class="absolute inset-0 rounded-3xl border-4 border-forest/10 dark:border-primary/10"
                    ></div>
                    <div class="z-10 flex items-center justify-center">
                      <p
                        id="live-timer"
                        class="text-zinc-900 dark:text-white text-7xl sm:text-8xl md:text-9xl font-black font-mono tracking-tighter tabular-nums"
                      >
                        00:00
                      </p>
                    </div>
                  </div>
                  <!-- Sets List / Progress -->
                  <div
                    id="live-sets-container"
                    class="flex w-full max-w-md flex-col gap-3 mt-10 opacity-0 transition-opacity duration-500"
                  >
                    <h4
                      class="text-zinc-500 dark:text-zinc-400 text-sm font-bold leading-normal tracking-[0.015em] px-4 pb-2 text-center w-full font-display"
                    >
                      Current Set
                    </h4>
                    <!-- Current Set (Active) -->
                    <div
                      class="relative flex items-center gap-4 bg-white dark:bg-surface-dark px-6 py-4 rounded-2xl border-2 border-forest dark:border-primary shadow-lg shadow-forest/10 dark:shadow-primary/10"
                    >
                      <div
                        class="relative z-10 flex items-center gap-4 w-full justify-between"
                      >
                        <div class="flex items-center gap-4">
                          <div
                            class="text-zinc-900 dark:text-white flex items-center justify-center shrink-0 size-12 bg-forest/10 dark:bg-primary/20 rounded-full"
                          >
                            <span
                              class="material-symbols-outlined text-3xl text-forest dark:text-primary filled"
                              >fitness_center</span
                            >
                          </div>
                          <div class="flex flex-col">
                            <p
                              id="live-set-count"
                              class="text-zinc-900 dark:text-white text-xl font-bold leading-tight font-display"
                            >
                              Set 1
                            </p>
                            <p
                              id="live-set-details"
                              class="text-zinc-500 dark:text-zinc-400 text-sm font-medium"
                            >
                              --
                            </p>
                          </div>
                        </div>
                        <div
                          class="size-8 rounded-full border-2 border-zinc-200 dark:border-zinc-700"
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Controls -->
                <div
                  class="mt-10 sm:mt-16 flex flex-col gap-4 w-full max-w-lg mx-auto px-4 pb-8"
                >
                  <div class="grid grid-cols-2 gap-4">
                    <!-- Secondary Action (Pause/Restart) -->
                    <div class="flex flex-col gap-2">
                      <button
                        onclick="toggleTimer()"
                        class="flex w-full cursor-pointer items-center justify-center gap-2 overflow-hidden rounded-2xl h-14 px-4 bg-zinc-100 dark:bg-surface-dark text-zinc-900 dark:text-white text-lg font-bold border border-zinc-200 dark:border-white/10 hover:bg-zinc-200 dark:hover:bg-white/10 transition-colors shadow-sm"
                      >
                        <span
                          id="btn-pause-icon"
                          class="material-symbols-outlined"
                          >pause</span
                        >
                        <span id="btn-pause-text">Pause</span>
                      </button>
                      <button
                        onclick="restartPhase()"
                        class="text-xs font-medium text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 text-center py-2"
                      >
                        Restart Phase
                      </button>
                    </div>
                    <!-- Primary Action (Start/Next) -->
                    <div class="flex flex-col gap-2">
                      <button
                        id="btn-main-action"
                        onclick="handleMainAction()"
                        class="flex w-full cursor-pointer items-center justify-center gap-2 overflow-hidden rounded-2xl h-14 px-4 bg-forest text-white dark:bg-primary dark:text-background-dark text-lg font-bold hover:brightness-110 transition-all shadow-lg shadow-forest/20 dark:shadow-primary/20"
                      >
                        <span id="btn-main-text">Start Workout</span>
                        <span class="material-symbols-outlined"
                          >arrow_forward</span
                        >
                      </button>
                    </div>
                  </div>
                  <!-- End Session Button (Moved to Bottom) -->
                  <button
                    onclick="endSession()"
                    class="w-full py-3 text-red-500 dark:text-red-400 text-sm font-bold hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors"
                  >
                    End Session
                  </button>
                </div>
              </main>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW 7: SETTINGS SCREEN -->
    <section
      id="view-settings"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark relative pb-24"
    >
      <div class="layout-container flex h-full grow flex-col">
        <div class="flex flex-1 justify-center p-4 sm:p-6 animate-fade-in">
          <div
            class="layout-content-container flex w-full max-w-md flex-col gap-6"
          >
            <header class="flex items-center justify-between py-2">
              <h1 class="text-3xl font-bold text-zinc-900 dark:text-white">
                Settings
              </h1>
            </header>
            <div
              class="flex items-center gap-4 p-4 rounded-2xl bg-white dark:bg-surface-card border border-zinc-200 dark:border-zinc-800 shadow-soft dark:shadow-none"
            >
              <div
                class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12"
                style="
                  background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCmMPErK74N6etuxlmR7MfPernmO9RgY7ZYbCWlmd8KhysHC87CzD5V7NqaTDwLUVCNZdolFjMCWo3OI-NWmHD7y3jYxLAuTG4OT7otZ8MYH7dXaQ_BGlkSJ9EGMs9CpNC12DUnF3fpc9FFZ9T4AFOHtybToUl3eJtGfEW-DuyK2TkPa0h313zZGM8PEesXgtFydphY6CKrMk04UnVkpGt2GeyiZOt80wmNCjPCFb9GZ4ssfzyGRBA3pITVpHxJtiLzUhCO0xdmYZY');
                "
              ></div>
              <div class="flex flex-col">
                <h2
                  class="text-zinc-900 dark:text-white text-lg font-bold"
                  id="settings-username"
                >
                  User
                </h2>
                <p
                  class="text-zinc-500 dark:text-zinc-400 text-sm"
                  id="settings-email"
                >
                  user@example.com
                </p>
              </div>
            </div>
            <div class="flex flex-col gap-6">
              <div class="flex flex-col gap-2">
                <h3
                  class="text-zinc-500 dark:text-zinc-400 text-sm font-bold uppercase tracking-wider px-2"
                >
                  Display
                </h3>
                <div
                  class="bg-white dark:bg-surface-card rounded-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden shadow-soft dark:shadow-none"
                >
                  <div
                    class="flex items-center justify-between p-4 border-b border-zinc-100 dark:border-zinc-800 last:border-0"
                  >
                    <div class="flex items-center gap-3">
                      <div
                        class="flex items-center justify-center size-8 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-white"
                      >
                        <span class="material-symbols-outlined">dark_mode</span>
                      </div>
                      <span class="text-zinc-900 dark:text-white font-medium"
                        >Dark Mode</span
                      >
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                      ><input
                        type="checkbox"
                        id="dark-mode-toggle"
                        class="sr-only peer"
                        onchange="toggleTheme()" />
                      <div
                        class="w-11 h-6 bg-zinc-300 peer-focus:outline-none rounded-full peer dark:bg-zinc-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-forest dark:peer-checked:bg-primary"
                      ></div
                    ></label>
                  </div>
                </div>
              </div>
              <!-- ... General Settings ... -->
              <div class="flex flex-col gap-2">
                <h3
                  class="text-zinc-500 dark:text-zinc-400 text-sm font-bold uppercase tracking-wider px-2"
                >
                  General
                </h3>
                <div
                  class="bg-white dark:bg-surface-card rounded-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden shadow-soft dark:shadow-none"
                >
                  <div
                    class="flex items-center justify-between p-4 border-b border-zinc-100 dark:border-zinc-800"
                  >
                    <div class="flex items-center gap-3">
                      <div
                        class="flex items-center justify-center size-8 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-white"
                      >
                        <span class="material-symbols-outlined"
                          >notifications</span
                        >
                      </div>
                      <span class="text-zinc-900 dark:text-white font-medium"
                        >Notifications</span
                      >
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                      ><input
                        type="checkbox"
                        id="toggle-notifications"
                        class="sr-only peer"
                        onchange="toggleSwitch('toggle-notifications')" />
                      <div
                        class="w-11 h-6 bg-zinc-300 peer-focus:outline-none rounded-full peer dark:bg-zinc-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-forest dark:peer-checked:bg-primary"
                      ></div
                    ></label>
                  </div>
                  <div class="flex items-center justify-between p-4">
                    <div class="flex items-center gap-3">
                      <div
                        class="flex items-center justify-center size-8 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-white"
                      >
                        <span class="material-symbols-outlined"
                          >straighten</span
                        >
                      </div>
                      <span class="text-zinc-900 dark:text-white font-medium"
                        >Units (Metric)</span
                      >
                    </div>
                    <label
                      class="relative inline-flex items-center cursor-pointer"
                      ><input
                        type="checkbox"
                        id="toggle-units"
                        class="sr-only peer"
                        checked
                        onchange="toggleSwitch('toggle-units')" />
                      <div
                        class="w-11 h-6 bg-zinc-300 peer-focus:outline-none rounded-full peer dark:bg-zinc-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-forest dark:peer-checked:bg-primary"
                      ></div
                    ></label>
                  </div>
                </div>
              </div>
              <button
                onclick="handleLogout()"
                class="w-full p-4 rounded-2xl bg-red-50 text-red-500 font-bold border border-red-100 dark:bg-red-500/10 dark:border-red-500/20 hover:bg-red-100 dark:hover:bg-red-500/20 transition-colors flex items-center justify-center gap-2 shadow-sm dark:shadow-none"
              >
                <span class="material-symbols-outlined">logout</span>Log Out
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- Nav Bar -->
      <nav
        class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-sm z-50"
      >
        <div
          class="flex h-16 items-center justify-around rounded-full bg-white/90 dark:bg-[#1c1c1e]/90 backdrop-blur-md border border-black/5 dark:border-white/10 shadow-2xl"
        >
          <a
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-black dark:hover:text-white transition-colors cursor-pointer"
            onclick="switchView('view-dashboard')"
            ><span class="material-symbols-outlined text-2xl">home</span
            ><span class="text-xs font-medium">Home</span></a
          >
          <a
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-black dark:hover:text-white transition-colors cursor-pointer"
            onclick="switchView('view-workouts')"
            ><span class="material-symbols-outlined text-2xl"
              >fitness_center</span
            ><span class="text-xs font-medium">Workouts</span></a
          >
          <a
            class="flex flex-col items-center justify-center gap-1 text-zinc-400 dark:text-stone-400 hover:text-black dark:hover:text-white transition-colors cursor-pointer"
            href="#"
            ><span class="material-symbols-outlined text-2xl">lunch_dining</span
            ><span class="text-xs font-medium">Diet</span></a
          >
          <button
            onclick="switchView('view-settings')"
            class="flex flex-col items-center justify-center gap-1 text-forest dark:text-primary cursor-pointer"
          >
            <span class="material-symbols-outlined text-2xl filled">person</span
            ><span class="text-xs font-medium">Profile</span>
          </button>
        </div>
      </nav>
    </section>

    <!-- NEW VIEW: WORKOUT SUMMARY (Completion Screen) -->
    <section
      id="view-summary"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark overflow-x-hidden"
    >
      <div
        class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden"
      >
        <div class="layout-container flex h-full grow flex-col">
          <div
            class="px-4 flex flex-1 justify-center py-10 sm:py-20 animate-fade-in"
          >
            <div
              class="layout-content-container flex flex-col items-center max-w-[960px] flex-1"
            >
              <!-- Success Checkmark -->
              <div
                class="flex items-center justify-center w-32 h-32 bg-forest dark:bg-primary rounded-full mb-8 shadow-lg shadow-forest/20 dark:shadow-primary/20"
              >
                <span
                  class="material-symbols-outlined text-white dark:text-background-dark !text-8xl"
                  >check</span
                >
              </div>
              <h1
                class="text-zinc-900 dark:text-white tracking-tight text-4xl font-bold leading-tight text-center pb-8"
              >
                Workout Complete!
              </h1>

              <!-- Stats Grid -->
              <div
                class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 w-full max-w-4xl p-4"
              >
                <div
                  class="flex min-w-[158px] flex-col gap-2 rounded-xl p-6 border border-zinc-200 dark:border-white/10 text-center items-center bg-white/50 dark:bg-white/5 shadow-sm"
                >
                  <span
                    class="material-symbols-outlined text-forest dark:text-primary"
                    >timer</span
                  >
                  <p
                    id="summary-time"
                    class="text-zinc-900 dark:text-white tracking-light text-2xl font-bold leading-tight"
                  >
                    --
                  </p>
                  <p
                    class="text-zinc-600 dark:text-gray-400 text-base font-medium leading-normal"
                  >
                    Time
                  </p>
                </div>
                <div
                  class="flex min-w-[158px] flex-col gap-2 rounded-xl p-6 border border-zinc-200 dark:border-white/10 text-center items-center bg-white/50 dark:bg-white/5 shadow-sm"
                >
                  <span
                    class="material-symbols-outlined text-forest dark:text-primary"
                    >fitness_center</span
                  >
                  <p
                    id="summary-volume"
                    class="text-zinc-900 dark:text-white tracking-light text-2xl font-bold leading-tight"
                  >
                    --
                  </p>
                  <p
                    class="text-zinc-600 dark:text-gray-400 text-base font-medium leading-normal"
                  >
                    Est. Volume
                  </p>
                </div>
                <div
                  class="flex min-w-[158px] flex-col gap-2 rounded-xl p-6 border border-zinc-200 dark:border-white/10 text-center items-center bg-white/50 dark:bg-white/5 shadow-sm"
                >
                  <span
                    class="material-symbols-outlined text-forest dark:text-primary"
                    >local_fire_department</span
                  >
                  <p
                    id="summary-calories"
                    class="text-zinc-900 dark:text-white tracking-light text-2xl font-bold leading-tight"
                  >
                    --
                  </p>
                  <p
                    class="text-zinc-600 dark:text-gray-400 text-base font-medium leading-normal"
                  >
                    Calories
                  </p>
                </div>
                <div
                  class="flex min-w-[158px] flex-col gap-2 rounded-xl p-6 border border-zinc-200 dark:border-white/10 text-center items-center bg-white/50 dark:bg-white/5 shadow-sm"
                >
                  <span
                    class="material-symbols-outlined text-forest dark:text-primary"
                    >exercise</span
                  >
                  <p
                    id="summary-exercise"
                    class="text-zinc-900 dark:text-white tracking-light text-lg font-bold leading-tight truncate w-full"
                  >
                    --
                  </p>
                  <p
                    class="text-zinc-600 dark:text-gray-400 text-base font-medium leading-normal"
                  >
                    Exercise
                  </p>
                </div>
                <div
                  class="flex min-w-[158px] flex-col gap-2 rounded-xl p-6 border border-zinc-200 dark:border-white/10 text-center items-center bg-white/50 dark:bg-white/5 shadow-sm"
                >
                  <span
                    class="material-symbols-outlined text-forest dark:text-primary"
                    >replay</span
                  >
                  <p
                    id="summary-sets"
                    class="text-zinc-900 dark:text-white tracking-light text-2xl font-bold leading-tight"
                  >
                    --
                  </p>
                  <p
                    class="text-zinc-600 dark:text-gray-400 text-base font-medium leading-normal"
                  >
                    Sets Completed
                  </p>
                </div>
                <div
                  class="flex min-w-[158px] flex-col gap-2 rounded-xl p-6 border border-zinc-200 dark:border-white/10 text-center items-center bg-white/50 dark:bg-white/5 shadow-sm"
                >
                  <span
                    class="material-symbols-outlined text-forest dark:text-primary"
                    >emoji_events</span
                  >
                  <p
                    class="text-zinc-900 dark:text-white tracking-light text-2xl font-bold leading-tight"
                  >
                    1
                  </p>
                  <p
                    class="text-zinc-600 dark:text-gray-400 text-base font-medium leading-normal"
                  >
                    Session Best
                  </p>
                </div>
              </div>

              <!-- Back to Home Action -->
              <div class="flex px-4 py-8 justify-center w-full max-w-xs">
                <button
                  onclick="finishWorkout()"
                  class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 px-5 bg-forest text-white dark:bg-primary dark:text-background-dark text-lg font-bold leading-normal tracking-[0.015em] hover:brightness-110 transition-all shadow-lg shadow-forest/20 dark:shadow-primary/20"
                >
                  <span class="truncate">Back to Home</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- NEW VIEW: WATER TRACKER -->
    <section
      id="view-water-tracker"
      class="view-section flex-col min-h-screen bg-background-light dark:bg-background-dark relative overflow-x-hidden"
    >
      <div class="flex flex-col h-full min-h-screen">
        <button onclick="switchView('view-dashboard')" class="glass-back-btn">
          <span class="material-symbols-outlined">arrow_back</span>
        </button>
        <header class="flex items-center justify-center p-6 pt-12">
          <h2 class="text-2xl font-bold text-zinc-900 dark:text-white">
            Hydration
          </h2>
        </header>
        <div
          class="flex flex-col items-center justify-center flex-1 gap-10 p-6"
        >
          <!-- Circular Progress -->
          <div class="relative w-64 h-64 flex items-center justify-center">
            <!-- Background Circle -->
            <div
              class="absolute inset-0 rounded-full border-8 border-zinc-200 dark:border-zinc-800"
            ></div>
            <!-- Wave Animation Container -->
            <div
              class="water-tank absolute inset-0 rounded-full border-8 border-transparent"
            >
              <div id="water-wave" class="water-wave-box">
                <div class="wave"></div>
                <div class="wave"></div>
                <div class="wave"></div>
              </div>
            </div>
            <!-- Center Content -->
            <div class="flex flex-col items-center z-10">
              <span
                class="material-symbols-outlined text-4xl text-water-blue mb-2 filled"
                >water_drop</span
              >
              <h2
                id="water-amount-display"
                class="text-4xl font-black text-zinc-900 dark:text-white"
              >
                0
              </h2>
              <p class="text-sm text-zinc-500 dark:text-zinc-400 font-medium">
                / 3000 ml
              </p>
            </div>
          </div>

          <!-- Quick Add Controls -->
          <div class="grid grid-cols-2 gap-4 w-full max-w-sm">
            <button
              onclick="addWater(250)"
              class="flex flex-col items-center justify-center p-4 rounded-2xl bg-white dark:bg-surface-card border border-zinc-200 dark:border-zinc-800 hover:border-water-blue dark:hover:border-water-blue transition-all group shadow-sm"
            >
              <span
                class="material-symbols-outlined text-3xl text-zinc-400 group-hover:text-water-blue mb-2"
                >local_cafe</span
              >
              <span class="font-bold text-zinc-900 dark:text-white"
                >+250ml</span
              >
            </button>
            <button
              onclick="addWater(500)"
              class="flex flex-col items-center justify-center p-4 rounded-2xl bg-white dark:bg-surface-card border border-zinc-200 dark:border-zinc-800 hover:border-water-blue dark:hover:border-water-blue transition-all group shadow-sm"
            >
              <span
                class="material-symbols-outlined text-3xl text-zinc-400 group-hover:text-water-blue mb-2"
                >water_bottle</span
              >
              <span class="font-bold text-zinc-900 dark:text-white"
                >+500ml</span
              >
            </button>
          </div>

          <!-- Logs & Secondary Controls -->
          <div class="w-full max-w-sm">
            <div class="flex justify-between items-center mb-2 px-2">
              <h4
                class="text-sm font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider"
              >
                Today's Records
              </h4>
              <button
                onclick="resetWater()"
                class="text-xs text-red-500 font-bold hover:underline"
              >
                Reset
              </button>
            </div>
            <div
              id="water-logs"
              class="flex flex-col gap-2 max-h-32 overflow-y-auto no-scrollbar mb-6"
            >
              <!-- Logs injected here -->
              <p class="text-center text-xs text-zinc-400 italic py-2">
                No records yet.
              </p>
            </div>
          </div>

          <div class="flex gap-4 w-full max-w-sm">
            <button
              onclick="addWater(-250)"
              class="w-full py-3 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 font-bold text-sm hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors"
            >
              Undo Last
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- FORGOT PASSWORD MODAL -->
    <div
      id="forgot-password-modal"
      class="fixed inset-0 z-50 hidden items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fade-in"
    >
      <div
        class="w-full max-w-md bg-white dark:bg-zinc-900 p-8 rounded-3xl shadow-2xl relative border border-zinc-200 dark:border-zinc-800"
      >
        <button
          onclick="closeForgotPassword()"
          class="absolute top-4 right-4 p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-500 hover:text-black dark:hover:text-white transition-colors"
        >
          <span class="material-symbols-outlined">close</span>
        </button>
        <div class="flex flex-col items-center text-center mb-6">
          <div
            class="w-16 h-16 rounded-full bg-forest/10 dark:bg-primary/20 flex items-center justify-center mb-4"
          >
            <span
              class="material-symbols-outlined text-3xl text-forest dark:text-primary"
              >lock_reset</span
            >
          </div>
          <h2 class="text-2xl font-bold text-zinc-900 dark:text-white mb-2">
            Reset Password
          </h2>
          <p class="text-zinc-600 dark:text-zinc-400 text-sm">
            Enter your email address and we'll send you a link to reset your
            password.
          </p>
        </div>
        <form onsubmit="handlePasswordReset(event)" class="space-y-4">
          <div class="space-y-2 text-left">
            <label class="text-sm font-medium text-zinc-700 dark:text-zinc-300"
              >Email Address</label
            >
            <input
              type="email"
              required
              placeholder="name@example.com"
              class="h-12 w-full rounded-xl border border-zinc-300 dark:border-zinc-700 bg-zinc-50 dark:bg-black px-4 text-zinc-900 dark:text-white focus:ring-2 focus:ring-forest dark:focus:ring-primary transition-all"
            />
          </div>
          <button
            type="submit"
            class="w-full h-12 bg-forest text-white dark:bg-primary dark:text-black font-bold rounded-xl hover:brightness-110 transition-all shadow-lg shadow-forest/20 dark:shadow-primary/20"
          >
            Send Reset Link
          </button>
        </form>
      </div>
    </div>

    <!-- VIDEO MODAL -->
    <div
      id="video-modal"
      class="fixed inset-0 z-50 hidden items-center justify-center bg-black/90 backdrop-blur-sm p-4 animate-fade-in"
    >
      <div
        class="relative w-full max-w-4xl aspect-video rounded-2xl overflow-hidden bg-black shadow-2xl"
      >
        <button
          onclick="closeVideo()"
          class="absolute top-4 right-4 z-20 p-2 rounded-full bg-black/50 text-white hover:bg-white hover:text-black transition-colors"
        >
          <span class="material-symbols-outlined">close</span>
        </button>
        <iframe
          id="youtube-frame"
          class="w-full h-full"
          src=""
          title="YouTube video player"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
      // Initialize Theme
      (function () {
        const savedTheme = localStorage.getItem("fithub_theme");
        if (savedTheme === "dark") {
          document.documentElement.classList.add("dark");
        } else if (savedTheme === "light") {
          document.documentElement.classList.remove("dark");
        } else {
          document.documentElement.classList.add("dark");
        }
      })();
      function toggleTheme() {
        const html = document.documentElement;
        if (html.classList.contains("dark")) {
          html.classList.remove("dark");
          localStorage.setItem("fithub_theme", "light");
        } else {
          html.classList.add("dark");
          localStorage.setItem("fithub_theme", "dark");
        }
      }
      function toggleSwitch(id) {
        console.log(id + " toggled");
      }
      function switchView(viewId) {
        const userStr = localStorage.getItem("fithub_user");
        let user = null;
        if (
          document
            .getElementById("view-live-session")
            .classList.contains("active") &&
          viewId !== "view-live-session"
        ) {
          cleanupLiveSession();
        }
        if (userStr) {
          user = JSON.parse(userStr);
          const name = user.name || "User";
          if (viewId === "view-dashboard") {
            const firstName = name.split(" ")[0];
            updateDashboardGreeting(firstName);
            updateWaterUI();
          }
          if (viewId === "view-settings") {
            document.getElementById("settings-username").textContent = name;
            document.getElementById("settings-email").textContent =
              user.email || "user@example.com";
            const isDark = document.documentElement.classList.contains("dark");
            document.getElementById("dark-mode-toggle").checked = isDark;
          }
          if (viewId === "view-bmi") {
            if (user.onboarding) {
              if (user.onboarding.height)
                document.getElementById("bmi-height").value =
                  user.onboarding.height;
              if (user.onboarding.weight)
                document.getElementById("bmi-weight").value =
                  user.onboarding.weight;
            }
          }
          if (viewId === "view-water-tracker") {
            updateWaterUI();
          }
        }
        document.querySelectorAll(".view-section").forEach((view) => {
          view.classList.remove("active");
        });
        const target = document.getElementById(viewId);
        if (target) {
          target.classList.add("active");
          const content = target.querySelector(".animate-fade-in");
          if (content) {
            content.style.animation = "none";
            content.offsetHeight;
            content.style.animation = null;
          }
        }
        window.scrollTo(0, 0);
      }

      // --------------------------------------------------------------------------------
      // DYNAMIC WORKOUT DATA
      // --------------------------------------------------------------------------------

      const workoutData = {
        dumbbells: {
          title: "Dumbbell Power",
          sets: 3,
          reps: 12,
          rest: "60s",
          videoId: "ykJmrZ5v0Oo",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuB3Jacwqgjko3jXaL7rl3R9zUhmTmkCLjSEdAGf1CyVwPJS4gOiMRpvRTUvVZFiTHc_6v-DXxrTmLsxtLPhBN45YViw9txrlQwuHyJ64HoXMj7T-ARfBJPXuBgQDcuX3x1SXLqNo1FbzkHRck2ZstENIxZylfPSCKyo4j2y7l_P0y9RKl4CpChlz7ffIphafYr7ih1vbjZaui8VBE5B0cRUPuMZD8tg4gh03pZGd1KIUXRdxFM4fJtR0wdmtRfuIHrY38gDChiCLA",
          instructions: [
            "Stand up straight with a dumbbell in each hand at arm's length.",
            "Keep your elbows close to your torso at all times.",
            "While holding the upper arms stationary, exhale and curl the weights forward while contracting the biceps.",
            "Continue to raise the weights until your biceps are fully contracted and the dumbbells are at shoulder level.",
            "Hold the contracted position for a brief pause as you squeeze your biceps.",
            "Inhale and slowly begin to lower the dumbbells back to the starting position.",
          ],
        },
        barbell: {
          title: "Barbell Blast",
          sets: 4,
          reps: 8,
          rest: "90s",
          videoId: "rT7DgCr-3pg",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuCf8ZYyVSOOjduHUQ2YuwtbppyDEoWPC2Vyy2GJUGH_VuDfO1pdJm-heY3YHN9AGNzy46MLpPO3JUvb3B4RXIfkY5kEiOlAO5FVTuFOcrbc92PuDdXcMhGGAbz0u8VSwrhJTMyKvR_0iJwQUVpY7_j_G8zvufbfiayHJAUzqky5ozeX-FZdyUSEomaylg3cRUtEQWtcdhwVX8JhQYTJPcw3p-C82tVgdBJlo5bwd34RNWy9_RaLCUPStTMswACUczKGz3KbzEkHSg",
          instructions: [
            "Lie back on a flat bench. Using a medium width grip (a grip that creates a 90-degree angle in the middle of the movement), lift the bar from the rack and hold it straight over you with your arms locked.",
            "From the starting position, breathe in and begin coming down slowly until the bar touches your middle chest.",
            "After a brief pause, push the bar back to the starting position as you breathe out.",
            "Focus on pushing the bar using your chest muscles.",
          ],
        },
        bodyweight: {
          title: "Bodyweight Basics",
          sets: 3,
          reps: 15,
          rest: "45s",
          videoId: "IODxDxX7oi4",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuD8gXWe4Nhd7Xrr-r-XRhGo16vr8Y1eGLXpnWinuAXaZFSPfLqh5mixq7tjSMq03wSoh9_diMd0KCK2phrKrMLbqQISj0cRjasTVdgakch0u41H4hHbOcPjjfMLh4kLqcIr2gQaPnvJIQJL2cwyD9okE5h3Ir_KDZJ5av0ZLPtZjPLpc4gx9RZVbNHyBHuCh6R7vO8dTJceCO2XqByKdPkTvgRsxZQj9-USdSB9Hwj4DFI3GUF57bE1Z8JhTrPawzpN0ib6UaV-Rw",
          instructions: [
            "Get into a high plank position.",
            "Lower your body until your chest is an inch above the ground.",
            "Push your torso back up until your arms are fully extended.",
            "Keep your core tight and your body in a straight line throughout the movement.",
          ],
        },
        cardio: {
          title: "Cardio Burn",
          sets: 1,
          reps: "30m",
          rest: "N/A",
          videoId: "ml6cT4AZdqI",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuCHyDKlcBwjY_k3IVFrliSwtcSzgQqOh2uun1XKGXGsV7TfHxyNx_TvjUdh6z4-_DEsMLLLgxBJpShvAASqpDf_J6X2QkDsWP1i5ZT19D7SNwoY05NF89SGBddpF-EVgKbEIazHan4aTrpySJBtLtqtrHdIz9AdHMy3mt5MiDanbCAjyxjuvkGSgH3jMbKBEXOqU73vvheAQ_XVT4oZgXkhUPW4j2xk0S_bDoXRt4gtRNIPsMmgMRs-2yn7wcVrQGqJGtE771pjPg",
          instructions: [
            "Start at a moderate pace for 5 minutes to warm up.",
            "Increase intensity to 75% max heart rate for 20 minutes.",
            "Cool down for 5 minutes at a slow pace.",
            "Ensure you stay hydrated throughout the session.",
          ],
        },
        kettlebells: {
          title: "Kettlebell Swing",
          sets: 3,
          reps: 20,
          rest: "60s",
          videoId: "s6SD8o27G7k",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuAX_9KLEXq51bvYM-W_SE9Ll4aLlgtmLc3aPE7GAdBcb2yPWAimGHwiCql2sdv1pdFUZCKIhfB6-Suj32vnSGLDGPIIP785uqoWUenjFNq6kRCCHzoR_bcZV8mzMc7v84S1UXymI1HQPEY7aiFzKoRiUrt1luKYfzmBYuzRgkGt8adSQr_qas1Qx-EWGAJLrtvPNSNJs-MK8y5A9glxmpk_RrlhWTFdZc24W1n4_6xQseRQzUHEgTZbb4EwppLBd8a7r2nf5C1kug",
          instructions: [
            "Stand with feet wider than shoulder-width.",
            "Hinge at your hips, swinging the kettlebell back between your legs.",
            "Drive your hips forward to swing the kettlebell up to shoulder height.",
            "Let the kettlebell swing back down between your legs and repeat.",
          ],
        },
        bands: {
          title: "Band Pull Apart",
          sets: 3,
          reps: 15,
          rest: "45s",
          videoId: "fkgSW2CvTq8",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuCk5mkYjM8E8IY7Z-s3on_q7t4Naa6SzGW5zHNOjtKZkpxIENYo7fbsj5LEja8IY45UdFXFp50kY5HMyyHggtiadAFuCT1RhdkWVni8hasg2U9ChVExudDB1riFhZDImPI9CYb7LFECMP9hS-7FayWVmQ8zJuwoxnbeBy9NySOSkt0I5B0NZx6lueu1Npd-5REU6Z8pG8FNh_0KcgUhk3xrLRUIn_tnXOd0DHAZAh2v0syEm7e0yUxPRK4Xu7EkpxYyD5pr8VZ4Gg",
          instructions: [
            "Hold a resistance band with both hands at shoulder width.",
            "Raise your arms to shoulder height.",
            "Pull the band apart by squeezing your shoulder blades together until your arms are out to the sides.",
            "Slowly return to the starting position.",
          ],
        },
        calisthenics: {
          title: "Muscle Up",
          sets: 3,
          reps: 5,
          rest: "90s",
          videoId: "0haFq2b8qfc",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuCHJ0BbjfJd_Vo_jvd-77cyqLX2fC_P81_exoZahAXa9aAyau0yUR1H_kBpShXk8kZ3YrG4DclH-qilqQ8xSpDb0KdJz44RPGvKNGD1OZzdIOpWQnZS6Dx5uRUn-f4PPgfTOanzcYS1EJAQi00u2s36PLJCnP0brIs_4mz_Uuef9ykcm0vo9QNbMPqH0-rJ1kDkKEXJccEPFtWJe3lo6ONbTzgnYMOyYdYm7zhdWYbuNsDV9K4A5NfHdoUiuVsnWcRxSh_kjTLFXg",
          instructions: [
            "Hang from a bar with a false grip.",
            "Pull yourself up explosively to your chest.",
            "Transition your wrists over the bar.",
            "Press up until your arms are straight.",
          ],
        },
        yoga: {
          title: "Sun Salutation",
          sets: 5,
          reps: "Flow",
          rest: "30s",
          videoId: "inpok4MKVLM",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuCRqWic08-1C18pvBcZLJ4bRT54y1kypImSQH7aAjNp5tIgwJ3_Dzo8B_03QNIg5-32o-gXDllcwth7EW0DpwT6MuKXdutFOj4Z8kbvelsOnCfl81Ve35Eu_p1oZnEPY7Y-d_Eb4rhodQhc5wsH_gfITCqQkypxapTANHnvzqxo4b5cWKt1ABOuBH0CqCYbUi7XHgpvMRBvQbMI27ndlh4uh7ckZ7t7SHWptdg7EdRlm6opyo7sRRKjM5no76RX8N_kkxCe56_ySw",
          instructions: [
            "Stand tall, inhale and raise arms overhead.",
            "Exhale and fold forward from the hips.",
            "Inhale and lift halfway up with a flat back.",
            "Exhale and step back into a plank, then lower down.",
            "Inhale into upward facing dog.",
            "Exhale into downward facing dog.",
          ],
        },
        hiit: {
          title: "Burpee Blitz",
          sets: 4,
          reps: "20s",
          rest: "10s",
          videoId: "8JJX2Y3ZJSo",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuCmkIhQWYHqqTYA-4snsGroUGVtnYeMheUR6aAWYkgB8vuz1p_mh-cyBf4zrOCK-sLNXjLnpJuQof92hE0TTVvX3CCg1Dl89-XfYvA5U95ke8b9tZMcSKZVby-_krHbdal-drEnObXzG_9mhuvCLiwQESMIkYxGBzKUu2BRITuhIkRwyq4vuvWTnC9isnTy0Y53b4l3vLmBwlMZGOI9rwnjSJs58f1HrC1bqSpS6tie_uU9lvr2U4g4C5kNNvC2w1q0_kUyq4R-HQ",
          instructions: [
            "Drop into a squat position with your hands on the ground.",
            "Kick your feet back into a plank position.",
            "Perform a push-up (optional).",
            "Jump your feet back to your hands.",
            "Explode up into a jump with hands overhead.",
          ],
        },
        pilates: {
          title: "The Hundred",
          sets: 3,
          reps: 100,
          rest: "60s",
          videoId: "1S585MvQj3o",
          image:
            "https://lh3.googleusercontent.com/aida-public/AB6AXuAbkKSNu25f6oIYRoBrKS-8esQX1uF4o8J_D2Whx5eHfVW8fvbzgPRsdqWSpC4gBiDpF66UXgUwxbTnpS81Dib_MJGd4rYXXGCJdjahIugHfI8iYfAGEFJJZ1eymoWwuVCRdoNQOUIv5h83aH2HLB37MdAOF9lwWa6HOjWp3uaQdll5nh9KMNgJdBJ8Oi1lWJw0PuTGNjtSRN4JnRmZSbN8y_D3wb4Vi676WASZGGuFXRQTlj3D2lNezU_a6SHz437Q_VY7J84LUQ",
          instructions: [
            "Lie on your back with your legs in table top position (knees bent at 90 degrees).",
            "Lift your head and shoulders off the mat.",
            "Extend your arms by your sides.",
            "Pump your arms up and down while inhaling for 5 counts and exhaling for 5 counts.",
            "Repeat for 10 cycles (100 pumps).",
          ],
        },
      };

      let currentWorkoutKey = null;
      let currentSet = 1;
      let timerInterval = null;
      let startTime = 0;
      let elapsedTime = 0;
      let isPaused = false;
      let isWarmup = false;
      let totalSessionTime = 0;

      function openWorkoutDetail(key) {
        const data = workoutData[key];
        if (!data) return;
        currentWorkoutKey = key;
        document.getElementById("wd-title").textContent = data.title;
        document.getElementById("wd-sets").textContent = data.sets;
        document.getElementById("wd-reps").textContent = data.reps;
        document.getElementById("wd-rest").textContent = data.rest;
        document.getElementById(
          "wd-image"
        ).style.backgroundImage = `url('${data.image}')`;
        const instructionsContainer = document.getElementById("wd-desc");
        instructionsContainer.innerHTML = "";
        const ul = document.createElement("ul");
        ul.className =
          "list-disc pl-5 space-y-2 marker:text-forest dark:marker:text-primary";
        data.instructions.forEach((text) => {
          const li = document.createElement("li");
          li.textContent = text;
          ul.appendChild(li);
        });
        instructionsContainer.appendChild(ul);
        switchView("view-workout-detail");
      }

      function cleanupLiveSession() {
        clearInterval(timerInterval);
        startTime = 0;
        elapsedTime = 0;
        totalSessionTime = 0;
        isPaused = false;
        isWarmup = false;
      }

      function startSession() {
        if (!currentWorkoutKey) return;
        const data = workoutData[currentWorkoutKey];
        cleanupLiveSession();
        currentSet = 1;
        isWarmup = true;
        document.getElementById("live-title").textContent = data.title;
        document.getElementById("live-status-label").textContent = "WARM UP";
        document.getElementById("live-set-count").textContent = "Warm Up";
        document.getElementById("live-set-details").textContent = "Get ready!";
        document.getElementById("btn-main-text").textContent = "Start Workout";
        document.getElementById("live-timer").textContent = "00:00";

        const container = document.getElementById("live-sets-container");
        if (container) {
          container.classList.remove("opacity-100");
          container.classList.add("opacity-50");
        }

        startTimer();
        switchView("view-live-session");
      }

      function endSession() {
        if (confirm("End current workout session?")) {
          clearInterval(timerInterval);
          if (!isPaused) {
            const currentElapsed = Date.now() - startTime;
            totalSessionTime += Math.floor(currentElapsed / 1000);
          } else {
            totalSessionTime += Math.floor(elapsedTime / 1000);
          }
          populateSummary(true);
          switchView("view-summary");
        }
      }

      function startTimer() {
        clearInterval(timerInterval);
        startTime = Date.now() - elapsedTime;
        timerInterval = setInterval(() => {
          if (!isPaused) {
            elapsedTime = Date.now() - startTime;
            const totalSeconds = Math.floor(elapsedTime / 1000);
            const m = Math.floor(totalSeconds / 60)
              .toString()
              .padStart(2, "0");
            const s = (totalSeconds % 60).toString().padStart(2, "0");
            const timerEl = document.getElementById("live-timer");
            if (timerEl) timerEl.textContent = `${m}:${s}`;
          }
        }, 100);
      }

      function toggleTimer() {
        isPaused = !isPaused;
        const btnText = document.getElementById("btn-pause-text");
        const btnIcon = document.getElementById("btn-pause-icon");
        if (isPaused) {
          clearInterval(timerInterval);
          if (btnText) btnText.textContent = "Resume";
          if (btnIcon) btnIcon.textContent = "play_arrow";
        } else {
          startTimer();
          if (btnText) btnText.textContent = "Pause";
          if (btnIcon) btnIcon.textContent = "pause";
        }
      }

      function handleMainAction() {
        if (isWarmup) {
          isWarmup = false;
          if (!isPaused)
            totalSessionTime += Math.floor((Date.now() - startTime) / 1000);
          else totalSessionTime += Math.floor(elapsedTime / 1000);

          elapsedTime = 0;
          startTime = Date.now();
          document.getElementById("live-timer").textContent = "00:00";
          document.getElementById("live-status-label").textContent =
            "WORKING SET";
          document.getElementById("btn-main-text").textContent = "Next Set";
          const container = document.getElementById("live-sets-container");
          if (container) {
            container.classList.remove("opacity-50");
            container.classList.add("opacity-100");
          }
          updateSetDisplay();
          startTimer();
        } else {
          if (!isPaused)
            totalSessionTime += Math.floor((Date.now() - startTime) / 1000);
          else totalSessionTime += Math.floor(elapsedTime / 1000);
          nextSet();
        }
      }

      function restartPhase() {
        elapsedTime = 0;
        startTime = Date.now();
        document.getElementById("live-timer").textContent = "00:00";
        isPaused = false;
        const btnText = document.getElementById("btn-pause-text");
        const btnIcon = document.getElementById("btn-pause-icon");
        if (btnText) btnText.textContent = "Pause";
        if (btnIcon) btnIcon.textContent = "pause";
        startTimer();
      }

      function nextSet() {
        const data = workoutData[currentWorkoutKey];
        if (currentSet < data.sets) {
          currentSet++;
          elapsedTime = 0;
          startTime = Date.now();
          document.getElementById("live-timer").textContent = "00:00";
          updateSetDisplay();
          startTimer();
        } else {
          cleanupLiveSession();
          populateSummary(false);
          switchView("view-summary");
        }
      }

      function populateSummary(isForced) {
        if (!currentWorkoutKey) return;
        const data = workoutData[currentWorkoutKey];
        const m = Math.floor(totalSessionTime / 60);
        const s = totalSessionTime % 60;
        document.getElementById("summary-time").textContent = `${m}m ${s}s`;
        document.getElementById("summary-exercise").textContent = data.title;
        document.getElementById("summary-sets").textContent = `${currentSet}`;
        // Calories: Approx 7 kcal/min
        const minutes = totalSessionTime / 60;
        const caloriesBurned = Math.max(Math.floor(minutes * 7), 5);
        document.getElementById("summary-calories").textContent =
          caloriesBurned;

        // Dynamic Volume Calculation (Simulated: Reps * Sets * 10kg avg)
        // If reps is "30m" or "20s" (cardio/hiit), volume isn't applicable, so we show N/A or a dashed line.
        let volume = "--";
        if (typeof data.reps === "number") {
          volume = data.reps * currentSet * 10 + "kg";
        } else {
          volume = "N/A";
        }
        document.getElementById("summary-volume").textContent = volume;
      }

      function finishWorkout() {
        switchView("view-dashboard");
      }
      function updateSetDisplay() {
        const data = workoutData[currentWorkoutKey];
        document.getElementById(
          "live-set-count"
        ).textContent = `Set ${currentSet}`;
        document.getElementById(
          "live-set-details"
        ).textContent = `${data.reps} Reps  ${data.rest} Rest`;
      }
      function playVideo() {
        if (!currentWorkoutKey) return;
        const videoId = workoutData[currentWorkoutKey].videoId;
        const modal = document.getElementById("video-modal");
        const iframe = document.getElementById("youtube-frame");
        if (iframe)
          iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&controls=1&showinfo=0&modestbranding=1`;
        if (modal) {
          modal.classList.remove("hidden");
          modal.classList.add("flex");
        }
      }
      function closeVideo() {
        const modal = document.getElementById("video-modal");
        const iframe = document.getElementById("youtube-frame");
        if (iframe) iframe.src = "";
        if (modal) {
          modal.classList.add("hidden");
          modal.classList.remove("flex");
        }
      }

      // Water Logic
      let currentWater = 0;
      let waterLog = [];
      const dailyGoal = 3000;
      (function () {
        const storedWater = localStorage.getItem("fithub_water");
        const storedLogs = localStorage.getItem("fithub_water_logs");
        if (storedWater) currentWater = parseInt(storedWater);
        if (storedLogs) waterLog = JSON.parse(storedLogs);
      })();
      function openWaterTracker() {
        updateWaterUI();
        switchView("view-water-tracker");
      }
      function addWater(amount) {
        const newTotal = Math.max(currentWater + amount, 0);
        if (amount > 0) {
          const now = new Date();
          const timeString = now.toLocaleTimeString([], {
            hour: "2-digit",
            minute: "2-digit",
          });
          waterLog.unshift({ time: timeString, amount: amount });
        } else if (amount < 0 && waterLog.length > 0) {
          waterLog.shift();
        }
        currentWater = newTotal;
        saveWaterData();
        updateWaterUI();
      }
      function resetWater() {
        if (confirm("Reset daily water intake to 0?")) {
          currentWater = 0;
          waterLog = [];
          saveWaterData();
          updateWaterUI();
        }
      }
      function saveWaterData() {
        localStorage.setItem("fithub_water", currentWater);
        localStorage.setItem("fithub_water_logs", JSON.stringify(waterLog));
      }
      function updateWaterUI() {
        const amountDisplay = document.getElementById("water-amount-display");
        const waveBox = document.getElementById("water-wave");
        const tank = document.querySelector(".water-tank");
        const logsContainer = document.getElementById("water-logs");
        if (amountDisplay) amountDisplay.textContent = currentWater;
        let percentage = (currentWater / dailyGoal) * 100;
        let displayPercentage = Math.min(percentage, 100);
        let translateVal = 110 - displayPercentage * 1.1;
        if (waveBox) {
          waveBox.style.transform = `translateY(${translateVal}%)`;
        }
        if (displayPercentage >= 100) {
          tank.classList.add("full");
        } else {
          tank.classList.remove("full");
        }
        if (logsContainer) {
          logsContainer.innerHTML = "";
          if (waterLog.length === 0) {
            logsContainer.innerHTML =
              '<p class="text-center text-xs text-zinc-400 italic py-2">No records yet.</p>';
          } else {
            waterLog.forEach((log) => {
              const row = document.createElement("div");
              row.className =
                "flex justify-between items-center bg-white dark:bg-surface-card p-3 rounded-lg border border-zinc-100 dark:border-white/5";
              row.innerHTML = `<span class="text-sm font-bold text-zinc-700 dark:text-white">${log.amount}ml</span><span class="text-xs text-zinc-400 font-mono">${log.time}</span>`;
              logsContainer.appendChild(row);
            });
          }
        }
        const dashText = document.getElementById("dash-water-text");
        const dashBar = document.getElementById("dash-water-bar");
        if (dashText) {
          let liters = (currentWater / 1000).toFixed(1);
          if (liters.endsWith(".0")) liters = liters.slice(0, -2);
          dashText.textContent = `${liters}L`;
        }
        if (dashBar) {
          dashBar.style.width = `${displayPercentage}%`;
        }
      }

      // Forgot Password
      function showForgotPassword() {
        document
          .getElementById("forgot-password-modal")
          .classList.remove("hidden");
        document.getElementById("forgot-password-modal").classList.add("flex");
      }
      function closeForgotPassword() {
        document
          .getElementById("forgot-password-modal")
          .classList.add("hidden");
        document
          .getElementById("forgot-password-modal")
          .classList.remove("flex");
      }
      function handlePasswordReset(e) {
        e.preventDefault();
        const btn = e.target.querySelector("button");
        const originalText = btn.textContent;
        btn.textContent = "Sending...";
        btn.disabled = true;
        setTimeout(() => {
          alert("Password reset link sent to your email!");
          btn.textContent = originalText;
          btn.disabled = false;
          closeForgotPassword();
        }, 1500);
      }

      // Standard Utils
      function toggleHeightConverter() {
        document.getElementById("height-converter").classList.toggle("hidden");
      }
      function applyHeightConversion() {
        const val = document.getElementById("conv-feet-input").value;
        if (!val) return;
        const parts = val.split(".");
        const feet = parseInt(parts[0]) || 0;
        const inches = parts[1] ? parseInt(parts[1]) : 0;
        const cm = feet * 30.48 + inches * 2.54;
        document.getElementById("bmi-height").value = Math.round(cm);
        toggleHeightConverter();
      }
      function calculateBMI() {
        const heightCm = parseFloat(
          document.getElementById("bmi-height").value
        );
        const weightKg = parseFloat(
          document.getElementById("bmi-weight").value
        );
        if (!heightCm || !weightKg) {
          alert("Please enter both height and weight.");
          return;
        }
        const heightM = heightCm / 100;
        const bmi = (weightKg / (heightM * heightM)).toFixed(1);
        let category = "",
          colorClass = "",
          analysis = "";
        let percentage = ((bmi - 15) / 25) * 100;
        if (percentage < 0) percentage = 0;
        if (percentage > 100) percentage = 100;
        if (bmi < 18.5) {
          category = "Underweight";
          colorClass = "text-bmi-under";
          analysis = "You are in the underweight range.";
        } else if (bmi < 25) {
          category = "Normal Weight";
          colorClass = "text-bmi-normal";
          analysis = "Great job! You are in the healthy weight range.";
        } else if (bmi < 30) {
          category = "Overweight";
          colorClass = "text-bmi-over";
          analysis = "You are in the overweight range.";
        } else {
          category = "Obese";
          colorClass = "text-bmi-obese";
          analysis = "You are in the obese range.";
        }
        const minWeight = (18.5 * heightM * heightM).toFixed(1);
        const maxWeight = (24.9 * heightM * heightM).toFixed(1);
        document.getElementById("bmi-score").innerText = bmi;
        document.getElementById("bmi-category").innerText = category;
        document.getElementById(
          "bmi-category"
        ).className = `text-xl font-bold ${colorClass}`;
        document.getElementById("bmi-pointer").style.left = `${percentage}%`;
        document.getElementById(
          "bmi-healthy-range"
        ).innerText = `${minWeight}kg - ${maxWeight}kg`;
        document.getElementById("bmi-analysis").innerText = analysis;
        const resultCard = document.getElementById("bmi-result-card");
        resultCard.classList.remove("hidden");
        resultCard.classList.add("flex");
        resultCard.scrollIntoView({ behavior: "smooth" });
      }
      function updateDashboardGreeting(name) {
        const hour = new Date().getHours();
        let greeting = "Good Night";
        if (hour >= 5 && hour < 12) greeting = "Good Morning";
        else if (hour >= 12 && hour < 16) greeting = "Good Afternoon";
        else if (hour >= 16 && hour < 20) greeting = "Good Evening";

        const el = document.getElementById("dashboard-greeting");
        if (el)
          el.innerHTML = `${greeting}, <span class="text-forest dark:text-primary">${name}</span>`;
      }
      function togglePassword(inputId) {
        const input = document.getElementById(inputId);
        const type =
          input.getAttribute("type") === "password" ? "text" : "password";
        input.setAttribute("type", type);
        const icon = input.nextElementSibling.querySelector(
          ".material-symbols-outlined"
        );
        icon.textContent =
          type === "password" ? "visibility_off" : "visibility";
      }
      function setLoading(btnId, isLoading) {
        const btn = document.getElementById(btnId);
        const span = btn.querySelector("span");
        const svg = btn.querySelector("svg");
        btn.disabled = isLoading;
        if (isLoading) {
          span.textContent = "Processing...";
          svg.classList.remove("hidden");
        } else {
          if (btnId === "login-btn") span.textContent = "Log In";
          if (btnId === "signup-btn") span.textContent = "Sign Up";
          svg.classList.add("hidden");
        }
      }
      function handleSignup(e) {
        e.preventDefault();
        const name = document.getElementById("signup-name").value;
        const email = document.getElementById("signup-email").value;
        const password = document.getElementById("signup-password").value;
        setLoading("signup-btn", true);
        setTimeout(() => {
          localStorage.setItem(
            "fithub_user",
            JSON.stringify({ name, email, password })
          );
          setLoading("signup-btn", false);
          switchView("view-onboarding");
        }, 1500);
      }
      function handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById("login-email").value;
        const password = document.getElementById("login-password").value;
        setLoading("login-btn", true);
        setTimeout(() => {
          const storedUser = localStorage.getItem("fithub_user");
          setLoading("login-btn", false);
          if (storedUser) {
            const user = JSON.parse(storedUser);
            if (user.email === email && user.password === password) {
              if (user.onboarding) switchView("view-dashboard");
              else switchView("view-onboarding");
            } else alert("Invalid credentials.");
          } else alert("User not found.");
        }, 1500);
      }
      function handleLogout() {
        if (confirm("Go back to login screen?")) switchView("view-login");
      }
      function selectGender(gender) {
        const maleBtn = document.getElementById("gender-male");
        const femaleBtn = document.getElementById("gender-female");
        document.getElementById("selected-gender").value = gender;
        [maleBtn, femaleBtn].forEach((btn) => {
          btn.classList.remove(
            "border-forest",
            "text-forest",
            "bg-forest/10",
            "dark:border-primary",
            "dark:text-primary",
            "dark:bg-primary/5",
            "ring-1",
            "ring-forest",
            "dark:ring-primary"
          );
          btn.classList.add(
            "border-zinc-300",
            "dark:border-zinc-800",
            "text-zinc-500",
            "dark:text-zinc-400"
          );
        });
        const sel = gender === "male" ? maleBtn : femaleBtn;
        sel.classList.remove(
          "border-zinc-300",
          "dark:border-zinc-800",
          "text-zinc-500",
          "dark:text-zinc-400"
        );
        sel.classList.add(
          "border-forest",
          "text-forest",
          "bg-forest/10",
          "dark:border-primary",
          "dark:text-primary",
          "dark:bg-primary/5",
          "ring-1",
          "ring-forest",
          "dark:ring-primary"
        );
      }
      function selectGoal(el, val) {
        document.querySelectorAll(".goal-card").forEach((c) => {
          c.classList.remove(
            "border-forest",
            "bg-forest/10",
            "ring-forest",
            "ring-offset-background-light",
            "dark:border-primary",
            "dark:bg-primary/5",
            "dark:ring-primary",
            "dark:ring-offset-background-dark",
            "ring-2",
            "ring-offset-4"
          );
          c.style.boxShadow = "none";
          c.classList.add(
            "border-zinc-300",
            "dark:border-zinc-800",
            "bg-white",
            "dark:bg-zinc-800"
          );
          const i = c.querySelector("span:not(.text-lg)");
          if (i) {
            i.classList.remove("text-forest", "dark:text-primary");
            i.classList.add("text-zinc-900", "dark:text-white");
          }
          const t = c.querySelector("p");
          if (t) {
            t.classList.remove("text-forest", "dark:text-primary");
            t.classList.add("text-zinc-900", "dark:text-white");
          }
          const ck = c.querySelector(".check-icon");
          if (ck) ck.classList.add("hidden");
        });
        el.classList.remove(
          "border-zinc-300",
          "dark:border-zinc-800",
          "bg-white",
          "dark:bg-zinc-800"
        );
        el.classList.add(
          "border-forest",
          "bg-forest/10",
          "dark:border-primary",
          "dark:bg-primary/5",
          "ring-2",
          "ring-forest",
          "dark:ring-primary",
          "ring-offset-4",
          "ring-offset-background-light",
          "dark:ring-offset-background-dark"
        );
        const ai = el.querySelector("span:not(.text-lg)");
        if (ai) {
          ai.classList.remove("text-zinc-900", "dark:text-white");
          ai.classList.add("text-forest", "dark:text-primary");
        }
        const at = el.querySelector("p");
        if (at) {
          at.classList.remove("text-zinc-900", "dark:text-white");
          at.classList.add("text-forest", "dark:text-primary");
        }
        const ac = el.querySelector(".check-icon");
        if (ac) ac.classList.remove("hidden");
        document.getElementById("selected-goal").value = val;
      }
      function handleOnboardingSubmit() {
        const age = document.getElementById("onboarding-age").value;
        const gender = document.getElementById("selected-gender").value;
        const height = document.getElementById("onboarding-height").value;
        const weight = document.getElementById("onboarding-weight").value;
        const goal = document.getElementById("selected-goal").value;
        if (!age || !height || !weight) {
          alert("Please fill in all fields.");
          return;
        }
        if (!gender) {
          alert("Select Gender.");
          return;
        }
        const userStr = localStorage.getItem("fithub_user");
        if (userStr) {
          const user = JSON.parse(userStr);
          user.onboarding = { age, gender, height, weight, goal };
          localStorage.setItem("fithub_user", JSON.stringify(user));
        }
        alert("Profile saved!");
        switchView("view-login");
      }
    </script>
  </body>
</html>
